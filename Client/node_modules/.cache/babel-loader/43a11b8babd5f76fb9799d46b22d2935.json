{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";/**\r\n * last updated: Nov 26 2020\r\n * Author: Dean Kim (dean.kim0507@gmail.com)\r\n * \r\n * This page shows the bloglist by using modal in bootstrap.\r\n * modal get the card that is included images and blog information from the Read Blog List.\r\n * user can click the thumbnails that's the first picture of pictures, user upladed\r\n * If user didn't upload any image, No Image file will be uploaded\r\n * \r\n * Map: RedBlogList, CreateBlogList - > BlogList.js -> Body.js -> index.js - > index.html\r\n * (Storing to Database) Http: CreateBlogList (Client) -> blogDataController (server)\r\n * (Retrieving from Database) Http: ReadBlogList (server) - > BlogList.js (Client)\r\n */import React,{useState,useEffect}from'react';import{Modal,Button,Card,CardColumns,Badge,Image}from'react-bootstrap';import'../css/BlogList.css';import axios from'axios';import ReadBlogList from'./BlogComponents/ReadBlogList';import{useHistory}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{UNAUTHORIZED}from\"./type\";import{SET_MESSAGE}from\"../Actions/types\";var format=require('date-format');function BlogList(props){var _useSelector=useSelector(function(state){return state.auth;}),isLoggedIn=_useSelector.isLoggedIn,user=_useSelector.user;var _useSelector2=useSelector(function(state){return state.message;}),message=_useSelector2.message;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),images=_useState6[0],setImages=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),addBlogShow=_useState8[0],setAddBlogShow=_useState8[1];var basicProfileImgPath=\"./uploadImages/icon/img_user.jpg\";var IMG_WIDTH=35;var IMG_LENGTH=40;var history=useHistory();var splittedImagePaths;var splittedImagePaths_preview;var temp_allBlogs=[];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),allBlogs=_useState10[0],setAllBlogs=_useState10[1];var nowDate=format.asString('MM-dd-yyyy',new Date());var handleClose=function handleClose(){return setShow(false);};var handleAddBlogClose=function handleAddBlogClose(){return setAddBlogShow(false);};var handleAddBlogOpen=function handleAddBlogOpen(){if(isLoggedIn){history.push('/blogcreate');}else setAddBlogShow(true);};// useEffect(() => {\n// \tif (message == UNAUTHORIZED) {\n// \t\tdispatch({\n// \t\t\ttype: SET_MESSAGE,\n// \t\t\tpayload: null,\n// \t\t});\n// \t\thistory.push('/login');\n// \t}\n// }, [message])\n// When user select the thumbnail, that function will be worked for retrieving the selected blog,\nvar handleShow=function handleShow(data){setShow(true);setData(data);//If over two images, it splits the images' paths\nsplittedImagePaths=data.imagePaths.split(',');for(var a=0;a<splittedImagePaths.length;a++){splittedImagePaths[a]=splittedImagePaths[a].substring(16,splittedImagePaths[a].length);console.log(splittedImagePaths[a]);}setImages(splittedImagePaths);};//Integreate two object (blog information, blog comments)\nuseEffect(function(){axios.post(\"/blog/list\").then(function(response){console.log(response.data);//to show current blog at the first.\nfor(var i=response.data.length-1;i>=0;i--){var temp_data={id:Number,writer:String,title:String,desc:String,userID:String,isLogedIn:Boolean,imagePaths:String,createdAt:String,updatedAt:String,userImg:String};temp_data.id=Number.parseInt(response.data[i].id);temp_data.writer=response.data[i].writer;temp_data.title=response.data[i].title;temp_data.desc=response.data[i].desc;temp_data.userID=response.data[i].userID;temp_data.isLogedIn=response.data[i].isLogedIn;temp_data.imagePaths=response.data[i].imagePaths;temp_data.createdAt=response.data[i].createdAt;temp_data.updatedAt=response.data[i].updatedAt;if(response.data[i].userImg){temp_data.userImg=response.data[i].userImg.substring(16,response.data[i].userImg.length);}else temp_data.userImg=basicProfileImgPath;temp_allBlogs.push(temp_data);}setAllBlogs(temp_allBlogs);});},[]);console.log(temp_allBlogs);return/*#__PURE__*/React.createElement(\"div\",{className:\"blogList_whole\"},/*#__PURE__*/React.createElement(Button,{className:\"blogList_addBlog_button\",variant:\"primary\",onClick:handleAddBlogOpen},\"Add Blog\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Modal,{show:addBlogShow,onHide:handleAddBlogClose,className:\"blogList_addBlogModal\",centered:true,size:'md'},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,\"NOTICE\")),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"p\",null,\"Is it Okay to post it as an OPEN BLOG*?\"),/*#__PURE__*/React.createElement(\"small\",null,/*#__PURE__*/React.createElement(\"p\",null,\"*OPEN BLOG: Blog anyone can edit and delete\"))),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",href:\"/login\"},\"GO TO LOGIN\"),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",href:\"/blogcreate\"},\"POST OPEN BLOG\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"blogList_list\"},/*#__PURE__*/React.createElement(CardColumns,null,allBlogs.map(function(data){splittedImagePaths_preview=data.imagePaths.split(',');splittedImagePaths_preview[0]=splittedImagePaths_preview[0].substring(16,splittedImagePaths_preview[0].length);console.log(splittedImagePaths_preview[0]);if(splittedImagePaths_preview[0]===\"\")splittedImagePaths_preview[0]=\"/uploadImages/No_Image.jpg\";return splittedImagePaths_preview[0]&&/*#__PURE__*/React.createElement(Card,{className:\"blogList_thumbnail\",key:data.id},/*#__PURE__*/React.createElement(Card.Header,null,data.title,format.asString('MM-dd-yyyy',new Date(data.createdAt))===nowDate?/*#__PURE__*/React.createElement(Badge,{variant:\"secondary\"},\"New\"):null),/*#__PURE__*/React.createElement(Card.Img,{alt:\"171x180\",src:splittedImagePaths_preview[0],onClick:function onClick(){return handleShow(data);}}));})),data&&/*#__PURE__*/React.createElement(Modal,{show:show,onHide:handleClose,className:\"blogList_modal\",centered:true,size:'lg'},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},data.isLogedIn?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Image,{className:\"blogList_userProfileImages\",src:data.userImg,width:IMG_WIDTH,height:IMG_LENGTH,alt:\"45x50\",roundedCircle:true}),/*#__PURE__*/React.createElement(\"h4\",null,data.userID)):data.writer),/*#__PURE__*/React.createElement(ReadBlogList,{id:data.id,writer:data.writer,userID:data.userID,title:data.title,desc:data.desc,imagePathArray:images,createdAt:data.createdAt,updatedAt:data.updatedAt,isLogedIn:data.isLogedIn,className:\"blogList_detailedBlog\"}))));}export default BlogList;","map":{"version":3,"sources":["C:/Users/834043/Desktop/study/Personal_Web_Site/client/src/Components/BlogList.jsx"],"names":["React","useState","useEffect","Modal","Button","Card","CardColumns","Badge","Image","axios","ReadBlogList","useHistory","useDispatch","useSelector","UNAUTHORIZED","SET_MESSAGE","format","require","BlogList","props","state","auth","isLoggedIn","user","message","dispatch","show","setShow","data","setData","images","setImages","addBlogShow","setAddBlogShow","basicProfileImgPath","IMG_WIDTH","IMG_LENGTH","history","splittedImagePaths","splittedImagePaths_preview","temp_allBlogs","allBlogs","setAllBlogs","nowDate","asString","Date","handleClose","handleAddBlogClose","handleAddBlogOpen","push","handleShow","imagePaths","split","a","length","substring","console","log","post","then","response","i","temp_data","id","Number","writer","String","title","desc","userID","isLogedIn","Boolean","createdAt","updatedAt","userImg","parseInt","map"],"mappings":"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","sourcesContent":["/**\r\n * last updated: Nov 26 2020\r\n * Author: Dean Kim (dean.kim0507@gmail.com)\r\n * \r\n * This page shows the bloglist by using modal in bootstrap.\r\n * modal get the card that is included images and blog information from the Read Blog List.\r\n * user can click the thumbnails that's the first picture of pictures, user upladed\r\n * If user didn't upload any image, No Image file will be uploaded\r\n * \r\n * Map: RedBlogList, CreateBlogList - > BlogList.js -> Body.js -> index.js - > index.html\r\n * (Storing to Database) Http: CreateBlogList (Client) -> blogDataController (server)\r\n * (Retrieving from Database) Http: ReadBlogList (server) - > BlogList.js (Client)\r\n */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Modal, Button, Card, CardColumns, Badge, Image } from 'react-bootstrap';\r\nimport '../css/BlogList.css'\r\nimport axios from 'axios';\r\nimport ReadBlogList from './BlogComponents/ReadBlogList';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n\tUNAUTHORIZED\r\n} from \"./type\";\r\nimport {\r\n\tSET_MESSAGE\r\n} from \"../Actions/types\";\r\nconst format = require('date-format');\r\nfunction BlogList(props) {\r\n\tconst { isLoggedIn, user } = useSelector(state => state.auth);\r\n\tconst { message } = useSelector(state => state.message);\r\n\tconst dispatch = useDispatch();\r\n\tconst [show, setShow] = useState(false);\r\n\tconst [data, setData] = useState(null);\r\n\tconst [images, setImages] = useState(null);\r\n\tconst [addBlogShow, setAddBlogShow] = useState(null);\r\n\tconst basicProfileImgPath = \"./uploadImages/icon/img_user.jpg\";\r\n\tconst IMG_WIDTH = 35;\r\n\tconst IMG_LENGTH = 40;\r\n\tlet history = useHistory();\r\n\tlet splittedImagePaths;\r\n\tlet splittedImagePaths_preview;\r\n\tlet temp_allBlogs = [];\r\n\tlet [allBlogs, setAllBlogs] = useState([]);\r\n\tlet nowDate = format.asString('MM-dd-yyyy', new Date());\r\n\r\n\tconst handleClose = () => setShow(false);\r\n\tconst handleAddBlogClose = () => setAddBlogShow(false);\r\n\tconst handleAddBlogOpen = () => {\r\n\t\tif (isLoggedIn) {\r\n\t\t\thistory.push('/blogcreate');\r\n\t\t}\r\n\t\telse setAddBlogShow(true);\r\n\t}\r\n\r\n\t// useEffect(() => {\r\n\t// \tif (message == UNAUTHORIZED) {\r\n\t// \t\tdispatch({\r\n\t// \t\t\ttype: SET_MESSAGE,\r\n\t// \t\t\tpayload: null,\r\n\t// \t\t});\r\n\t// \t\thistory.push('/login');\r\n\t// \t}\r\n\t// }, [message])\r\n\t// When user select the thumbnail, that function will be worked for retrieving the selected blog,\r\n\tconst handleShow = (data) => {\r\n\t\tsetShow(true);\r\n\t\tsetData(data);\r\n\r\n\t\t//If over two images, it splits the images' paths\r\n\t\tsplittedImagePaths = data.imagePaths.split(',');\r\n\t\tfor (let a = 0; a < splittedImagePaths.length; a++) {\r\n\t\t\tsplittedImagePaths[a] = splittedImagePaths[a].substring(16, splittedImagePaths[a].length);\r\n\t\t\tconsole.log(splittedImagePaths[a]);\r\n\t\t}\r\n\t\tsetImages(splittedImagePaths);\r\n\t}\r\n\t//Integreate two object (blog information, blog comments)\r\n\tuseEffect(() => {\r\n\t\taxios.post(\"/blog/list\")\r\n\t\t\t.then(response => {\r\n\t\t\t\tconsole.log(response.data);\r\n\t\t\t\t//to show current blog at the first.\r\n\t\t\t\tfor (let i = response.data.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tlet temp_data = {\r\n\t\t\t\t\t\tid: Number,\r\n\t\t\t\t\t\twriter: String,\r\n\t\t\t\t\t\ttitle: String,\r\n\t\t\t\t\t\tdesc: String,\r\n\t\t\t\t\t\tuserID: String,\r\n\t\t\t\t\t\tisLogedIn: Boolean,\r\n\t\t\t\t\t\timagePaths: String,\r\n\t\t\t\t\t\tcreatedAt: String,\r\n\t\t\t\t\t\tupdatedAt: String,\r\n\t\t\t\t\t\tuserImg: String\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttemp_data.id = Number.parseInt(response.data[i].id);\r\n\t\t\t\t\ttemp_data.writer = response.data[i].writer;\r\n\t\t\t\t\ttemp_data.title = response.data[i].title;\r\n\t\t\t\t\ttemp_data.desc = response.data[i].desc;\r\n\t\t\t\t\ttemp_data.userID = response.data[i].userID;\r\n\t\t\t\t\ttemp_data.isLogedIn = response.data[i].isLogedIn;\r\n\t\t\t\t\ttemp_data.imagePaths = response.data[i].imagePaths;\r\n\t\t\t\t\ttemp_data.createdAt = response.data[i].createdAt;\r\n\t\t\t\t\ttemp_data.updatedAt = response.data[i].updatedAt;\r\n\t\t\t\t\tif (response.data[i].userImg) {\r\n\t\t\t\t\t\ttemp_data.userImg = response.data[i].userImg.substring(16, response.data[i].userImg.length);\r\n\t\t\t\t\t} else temp_data.userImg = basicProfileImgPath;\r\n\t\t\t\t\ttemp_allBlogs.push(temp_data);\r\n\t\t\t\t}\r\n\t\t\t\tsetAllBlogs(temp_allBlogs);\r\n\t\t\t})\r\n\t}, []);\r\n\tconsole.log(temp_allBlogs)\r\n\treturn (\r\n\t\t<div className=\"blogList_whole\">\r\n\t\t\t<Button className=\"blogList_addBlog_button\" variant=\"primary\" onClick={handleAddBlogOpen}>Add Blog</Button>\r\n\t\t\t<br />\r\n\t\t\t< Modal show={addBlogShow} onHide={handleAddBlogClose} className=\"blogList_addBlogModal\"\r\n\t\t\t\tcentered={true} size={'md'}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>NOTICE</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<p>Is it Okay to post it as an OPEN BLOG*?</p>\r\n\t\t\t\t\t<small><p>*OPEN BLOG: Blog anyone can edit and delete</p></small>\r\n\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button variant=\"secondary\" href='/login'>GO TO LOGIN</Button>\r\n\t\t\t\t\t<Button variant=\"primary\" href='/blogcreate'>POST OPEN BLOG</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\r\n\t\t\t</Modal>\r\n\t\t\t<div className=\"blogList_list\">\r\n\t\t\t\t<CardColumns>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tallBlogs.map((data) => {\r\n\t\t\t\t\t\t\tsplittedImagePaths_preview = data.imagePaths.split(',');\r\n\t\t\t\t\t\t\tsplittedImagePaths_preview[0] = splittedImagePaths_preview[0].substring(16, splittedImagePaths_preview[0].length);\r\n\t\t\t\t\t\t\tconsole.log(splittedImagePaths_preview[0])\r\n\t\t\t\t\t\t\tif (splittedImagePaths_preview[0] === \"\") splittedImagePaths_preview[0] = \"/uploadImages/No_Image.jpg\";\r\n\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\tsplittedImagePaths_preview[0] &&\r\n\t\t\t\t\t\t\t\t<Card className=\"blogList_thumbnail\" key={data.id}>\r\n\t\t\t\t\t\t\t\t\t<Card.Header>\r\n\t\t\t\t\t\t\t\t\t\t{data.title}\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tformat.asString('MM-dd-yyyy', new Date(data.createdAt)) === nowDate ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"secondary\">New</Badge>\r\n\t\t\t\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</Card.Header>\r\n\t\t\t\t\t\t\t\t\t<Card.Img\r\n\t\t\t\t\t\t\t\t\t\talt=\"171x180\"\r\n\t\t\t\t\t\t\t\t\t\tsrc={splittedImagePaths_preview[0]}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleShow(data)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</CardColumns>\r\n\r\n\t\t\t\t{data &&\r\n\t\t\t\t\t< Modal show={show} onHide={handleClose} className=\"blogList_modal\"\r\n\t\t\t\t\t\tcentered={true} size={'lg'}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Modal.Header closeButton>{\r\n\t\t\t\t\t\t\tdata.isLogedIn ?\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"blogList_userProfileImages\"\r\n\t\t\t\t\t\t\t\t\t\tsrc={data.userImg}\r\n\t\t\t\t\t\t\t\t\t\twidth={IMG_WIDTH}\r\n\t\t\t\t\t\t\t\t\t\theight={IMG_LENGTH}\r\n\t\t\t\t\t\t\t\t\t\talt=\"45x50\"\r\n\t\t\t\t\t\t\t\t\t\troundedCircle\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t{<h4>{data.userID}</h4>}\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t: data.writer\r\n\t\t\t\t\t\t}</Modal.Header>\r\n\t\t\t\t\t\t<ReadBlogList id={data.id}\r\n\t\t\t\t\t\t\twriter={data.writer}\r\n\t\t\t\t\t\t\tuserID={data.userID}\r\n\t\t\t\t\t\t\ttitle={data.title}\r\n\t\t\t\t\t\t\tdesc={data.desc}\r\n\t\t\t\t\t\t\timagePathArray={images}\r\n\t\t\t\t\t\t\tcreatedAt={data.createdAt}\r\n\t\t\t\t\t\t\tupdatedAt={data.updatedAt}\r\n\t\t\t\t\t\t\tisLogedIn={data.isLogedIn}\r\n\t\t\t\t\t\t\tclassName=\"blogList_detailedBlog\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</ReadBlogList>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div >\r\n\t);\r\n}\r\n\r\nexport default BlogList;"]},"metadata":{},"sourceType":"module"}