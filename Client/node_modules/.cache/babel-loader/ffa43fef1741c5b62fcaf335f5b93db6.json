{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Project1\\\\src\\\\Components\\\\Board.js\";\nimport React, { Component } from 'react';\nimport TOC from \"./BoardComponents/TOC\";\nimport ReadContent from \"./BoardComponents/ReadContent\";\nimport Subject from \"./BoardComponents/Subject\";\nimport Control from \"./BoardComponents/Control\";\nimport UpdateContent from \"./BoardComponents/UpdateContent\";\nimport CreateContent from './BoardComponents/CreateContent';\nimport axios from 'axios';\nimport { Button } from 'reactstrap';\n\nclass Board extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mode: 'list',\n      selected_content_id: 0,\n      // welcome:{title:'Welcome', desc:'Hello, React!!'},\n      subject: {\n        title: 'Welcome to My project1',\n        sub: \"Developing Board...\"\n      },\n      contents: []\n    };\n    this.max_content_id = this.max_content_id;\n  } // receive data by using fetch\n\n\n  componentWillMount() {\n    fetch('/board/senddata').then(res => res.json()).then(data => this.setState({\n      contents: data.rows\n    }));\n  } // receive data by using axios (don't need to convert)\n\n\n  setData(_writer, _title, _desc, _mode) {\n    let data = {\n      writer: _writer,\n      title: _title,\n      description: _desc,\n      mode: _mode\n    };\n    axios.post('/board/receivedata', data).then(response => this.setState({\n      contents: response.data.rows[1]\n    })).catch(function (error) {\n      console.log(error);\n    });\n    console.log(this.state.contents); // <TOC \n    // onChangePage = {\n    // \tfunction(id){ \n    // \t  this.setState({\n    // \t\tmode:'read',\n    // \t\tselected_content_id:Number(id)//문자를 숫자로 변경해주는 함수 Number\n    // \t  });\n    // \t}.bind(this)\n    //   } data={this.state.contents}></TOC>\n    // \tfetch('http://localhost:4000/board/giveresult'\n    // \t,{\n    // \tmethod: 'POST',\n    // \theaders:{\n    // \t\t'Content-Type': 'application/json',\n    // \t\t'Accept': 'application/json'\n    // \t},\n    // \tbody:JSON.stringify(data)\n    // \t})\n    // \t.then (console.log(data))\n    // \t.then (res => res.json())\n    // \t.then (data => console.log(data));\n  }\n\n  getReadContent() {\n    let i = 0;\n\n    while (i < this.state.contents.length) {\n      let data = this.state.contents[i];\n\n      if (data.id === this.state.selected_content_id) {\n        return data;\n        break;\n      }\n\n      i = i + 1;\n    }\n  }\n\n  getContent() {\n    let _title,\n        _writer,\n        _desc,\n        _article,\n        _content = null;\n\n    if (this.state.mode === 'list') {// console.log(this.state.contents)\n      // this. max_content_id = this.state.contents[this.state.contents.length].id\n      // console.log(this.max_content_id)\n    } //read\n    else if (this.state.mode === 'read') {\n        _content = this.getReadContent();\n        console.log(_content);\n        _article = /*#__PURE__*/React.createElement(ReadContent, {\n          writer: _content.writer,\n          title: _content.title,\n          desc: _content.description,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 16\n          }\n        });\n      } // Update\n      else if (this.state.mode === 'update') {\n          _content = this.getReadContent();\n          _article = /*#__PURE__*/React.createElement(UpdateContent, {\n            data: _content,\n            onSubmit: function (_id, _writer, _title, _desc) {\n              //add content to this.state.cotnents\n              let _contents = Array.from(this.state.contents);\n\n              let i = 0;\n\n              while (i < _contents.length) {\n                if (_contents[i].id === _id) {\n                  _contents[i] = {\n                    id: _id,\n                    writer: _writer,\n                    title: _title,\n                    description: _desc\n                  };\n                  break;\n                }\n\n                i = i + 1;\n              }\n\n              this.setState({\n                contents: _contents,\n                mode: 'read'\n              });\n              this.setData();\n            }.bind(this),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 16\n            }\n          });\n        } //create\n        else if (this.state.mode === 'create') {\n            _article = /*#__PURE__*/React.createElement(CreateContent, {\n              onSubmit: function (_writer, _title, _desc) {\n                //add content to this.state.cotnents\n                // this.max_content_id= this.state.contents[this.state.contents.length-1].id+1;\n                // var _contents = Array.from(this.state.contents);\n                // _contents.push({id:this.max_content_id, writer: _writer, title:_title, description:_desc});\n                this.setData(_writer, _title, _desc, 'create');\n                this.setState({\n                  // contents:_contents,\n                  selected_content_id: this.state.contents[this.state.contents.length - 1].id,\n                  mode: 'read'\n                });\n              }.bind(this),\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 15\n              }\n            });\n          }\n\n    return _article;\n  } //   creatArticle(){\n  // \tvar _create = null;\n  // \t\t// Create\n  // \t\t_create = <CreateContent onSubmit={\n  // \t\t\tfunction(_writer,_title,_desc){\n  // \t\t\t//add content to this.state.cotnents\n  // \t\t\t// this.max_content_id= this.state.contents[this.state.contents.length-1].id+1;\n  // \t\t\t// var _contents = Array.from(this.state.contents);\n  // \t\t\t// _contents.push({id:this.max_content_id, writer: _writer, title:_title, description:_desc});\n  // \t\t\tthis.setData(_writer,_title,_desc,'create');\n  // \t\t\tthis.setState({\n  // \t\t\t\t// contents:_contents,\n  // \t\t\t\tselected_content_id:this.state.contents[this.state.contents.length-1].id,\n  // \t\t\t\tmode:'read'\n  // \t\t\t});\n  // \t\t\tthis.getContent();\n  // \t\t\t}.bind(this)\n  // \t\t}></CreateContent>\n  // \t\tif(this.state.mode!='update'){\n  // \t\treturn _create;\n  // \t\t}\n  // \t\telse return null;\t\n  //   }\n\n\n  createController() {\n    let _button;\n\n    if (this.state.mode === 'read' || this.state.mode === 'update') {\n      _button = /*#__PURE__*/React.createElement(Control, {\n        onChangeMode: function (_mode) {\n          if (_mode === 'delete') {\n            if (window.confirm('really?')) {\n              let _content = Array.from(this.state.contents);\n\n              let i = 0;\n\n              while (i < this.state.contents.length) {\n                if (_content[i].id === this.state.selected_content_id) {\n                  _content.splice(i, 1);\n\n                  break;\n                }\n\n                i = i + 1;\n              }\n\n              this.setState({\n                mode: 'list',\n                contents: _content\n              });\n              alert('deleted!');\n            }\n          } else {\n            this.setState({\n              mode: _mode\n            });\n          }\n        }.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 14\n        }\n      });\n      return _button;\n    }\n\n    if (this.state.mode === 'list') {\n      _button = /*#__PURE__*/React.createElement(Button, {\n        onClick: function (e) {\n          e.preventDefault();\n          this.setState({\n            mode: 'create'\n          });\n        }.bind(this),\n        type: \"button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 14\n        }\n      }, \"Write\");\n      return _button;\n    } else return null;\n  }\n\n  createList() {\n    if (this.state.mode === 'list') {\n      let _list = /*#__PURE__*/React.createElement(TOC, {\n        onChangePage: function (id) {\n          this.setState({\n            mode: 'read',\n            selected_content_id: Number(id) //문자를 숫자로 변경해주는 함수 Number\n\n          });\n        }.bind(this),\n        data: this.state.contents,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 16\n        }\n      });\n\n      return _list;\n    }\n\n    return null;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Board\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(Subject, {\n      title: this.state.subject.title,\n      sub: this.state.subject.sub,\n      onChangePage: function () {\n        this.setState({\n          mode: 'list'\n        });\n      }.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 4\n      }\n    }), this.createList(), this.getContent(), this.createController(), /*#__PURE__*/React.createElement(Button, {\n      onClick: function (e) {\n        e.preventDefault();\n        this.setState({\n          mode: 'create'\n        });\n      }.bind(this),\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 4\n      }\n    }, \"Write\"));\n  }\n\n}\n\nexport default Board;","map":{"version":3,"sources":["C:/Users/834043/Desktop/study/Project1/src/Components/Board.js"],"names":["React","Component","TOC","ReadContent","Subject","Control","UpdateContent","CreateContent","axios","Button","Board","constructor","props","state","mode","selected_content_id","subject","title","sub","contents","max_content_id","componentWillMount","fetch","then","res","json","data","setState","rows","setData","_writer","_title","_desc","_mode","writer","description","post","response","catch","error","console","log","getReadContent","i","length","id","getContent","_article","_content","_id","_contents","Array","from","bind","createController","_button","window","confirm","splice","alert","e","preventDefault","createList","_list","Number","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport TOC from \"./BoardComponents/TOC\"\r\nimport ReadContent from \"./BoardComponents/ReadContent\"\r\nimport Subject from \"./BoardComponents/Subject\"\r\nimport Control from \"./BoardComponents/Control\"\r\nimport UpdateContent from \"./BoardComponents/UpdateContent\"\r\nimport CreateContent from './BoardComponents/CreateContent';\r\nimport axios from 'axios';\r\nimport { Button } from 'reactstrap';\r\n\r\n\r\n\r\n\r\nclass Board extends Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state ={\r\n\t\tmode:'list',\r\n      \tselected_content_id:0,\r\n      \t// welcome:{title:'Welcome', desc:'Hello, React!!'},\r\n      \tsubject:{title:'Welcome to My project1', sub:\"Developing Board...\"},\r\n\t\tcontents:[]\r\n\t}\r\n\tthis.max_content_id=this.max_content_id;\r\n\r\n}\t\r\n\t// receive data by using fetch\r\n\tcomponentWillMount() {\r\n\t\t\r\n\t\tfetch('/board/senddata')\r\n\t\t.then (res => res.json())\r\n\t\t.then (data => this.setState({contents: data.rows}));\r\n\t}\r\n\r\n\t// receive data by using axios (don't need to convert)\r\n\tsetData(_writer,_title,_desc,_mode) {\r\n\t\t\r\n\t\tlet data = {\r\n\t\t\twriter:_writer,\r\n\t\t\ttitle:_title,\r\n\t\t\tdescription:_desc,\r\n\t\t\tmode:_mode\r\n\t\t}\r\n\r\n\t\taxios.post('/board/receivedata',\r\n\t\t\tdata)\r\n\t\t.then(response => \r\n\t\t\tthis.setState({contents: response.data.rows[1]}))\r\n\t\t.catch(function (error) {\r\n\t\tconsole.log(error);\r\n\t\t});\r\n\t\tconsole.log(this.state.contents);\r\n\r\n\t\t// <TOC \r\n\t\t// onChangePage = {\r\n\t\t// \tfunction(id){ \r\n\t\t// \t  this.setState({\r\n\t\t// \t\tmode:'read',\r\n\t\t// \t\tselected_content_id:Number(id)//문자를 숫자로 변경해주는 함수 Number\r\n\t\t// \t  });\r\n\t\t// \t}.bind(this)\r\n\t\t//   } data={this.state.contents}></TOC>\r\n\t\t\r\n\t// \tfetch('http://localhost:4000/board/giveresult'\r\n\t// \t,{\r\n\t// \tmethod: 'POST',\r\n\t// \theaders:{\r\n\t// \t\t'Content-Type': 'application/json',\r\n    // \t\t'Accept': 'application/json'\r\n\t// \t},\r\n\t// \tbody:JSON.stringify(data)\r\n\t\t\r\n\t// \t})\r\n\t// \t.then (console.log(data))\r\n\t// \t.then (res => res.json())\r\n\t// \t.then (data => console.log(data));\r\n  \t}\r\n\t\r\n\r\n\tgetReadContent(){\r\n\t\tlet i =0;\r\n\t\t  while(i<this.state.contents.length){\r\n\t\t\tlet data = this.state.contents[i];\r\n\t\t\tif(data.id === this.state.selected_content_id){\r\n\t\t\t  return data;\r\n\t\t\t  break;\r\n\t\t\t}\r\n\t\t\ti=i+1;\r\n\t\t  }\r\n\t  }\r\n\t  \r\n\tgetContent(){\r\n\t\tlet _title, _writer, _desc,_article,_content = null;\r\n\t\tif(this.state.mode ==='list'){\r\n\t\t\t// console.log(this.state.contents)\r\n\t\t\t// this. max_content_id = this.state.contents[this.state.contents.length].id\r\n\t\t\t// console.log(this.max_content_id)\r\n\t\t}\r\n\r\n\t\t//read\r\n\t\telse if (this.state.mode ==='read'){\r\n\t\t  _content = this.getReadContent();\r\n\t\t\tconsole.log(_content);\r\n\t\t  _article = <ReadContent writer={_content.writer} title= {_content.title} desc= {_content.description} ></ReadContent>\r\n\t\t}\r\n\r\n\t\t// Update\r\n\t\telse if(this.state.mode ==='update'){\r\n\t\t  _content = this.getReadContent();\r\n\t\t  _article = <UpdateContent data = {_content} onSubmit={\r\n\t\t\tfunction(_id, _writer, _title, _desc){\r\n\t\t\t  //add content to this.state.cotnents\r\n\t\t\t  let _contents = Array.from(this.state.contents);\r\n\t\t\t  let i =0;\r\n\t\t\t  while(i<_contents.length){\r\n\t\t\t\tif(_contents[i].id ===_id){\r\n\t\t\t\t  _contents[i] = {id:_id, writer:_writer, title:_title, description:_desc};\r\n\t\t\t\t  break;\r\n\t\t\t\t}\r\n\t\t\t\ti=i+1;\r\n\t\t\t  }\r\n\t\t\t  this.setState({\r\n\t\t\t\tcontents:_contents,\r\n\t\t\t\tmode:'read'\r\n\t\t\t  });\r\n\t\t\tthis.setData();\r\n\t\t\t}.bind(this)\r\n\t\t  }></UpdateContent>\r\n\t\t \r\n\t\t}\r\n\r\n\t\t//create\r\n\r\n\t\telse if (this.state.mode ==='create'){\r\n\t\t\t_article = <CreateContent onSubmit={\r\n\t\t\t\tfunction(_writer,_title,_desc){\r\n\t\t\t\t//add content to this.state.cotnents\r\n\t\t\t\t// this.max_content_id= this.state.contents[this.state.contents.length-1].id+1;\r\n\t\t\t\t// var _contents = Array.from(this.state.contents);\r\n\t\t\t\t// _contents.push({id:this.max_content_id, writer: _writer, title:_title, description:_desc});\r\n\t\t\t\tthis.setData(_writer,_title,_desc,'create');\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t// contents:_contents,\r\n\t\t\t\t\tselected_content_id:this.state.contents[this.state.contents.length-1].id,\r\n\t\t\t\t\tmode:'read'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t}.bind(this)\r\n\t\t\t\t\r\n\t\t\t}></CreateContent>\r\n\t\t}\r\n\t\treturn _article;\r\n\t  }\r\n\r\n\t//   creatArticle(){\r\n\t// \tvar _create = null;\r\n\t// \t\t// Create\r\n\t// \t\t_create = <CreateContent onSubmit={\r\n\t// \t\t\tfunction(_writer,_title,_desc){\r\n\t// \t\t\t//add content to this.state.cotnents\r\n\t// \t\t\t// this.max_content_id= this.state.contents[this.state.contents.length-1].id+1;\r\n\t// \t\t\t// var _contents = Array.from(this.state.contents);\r\n\t// \t\t\t// _contents.push({id:this.max_content_id, writer: _writer, title:_title, description:_desc});\r\n\t// \t\t\tthis.setData(_writer,_title,_desc,'create');\r\n\t// \t\t\tthis.setState({\r\n\t// \t\t\t\t// contents:_contents,\r\n\t// \t\t\t\tselected_content_id:this.state.contents[this.state.contents.length-1].id,\r\n\t// \t\t\t\tmode:'read'\r\n\t// \t\t\t});\r\n\t// \t\t\tthis.getContent();\r\n\t// \t\t\t}.bind(this)\r\n\t\t\t\t\r\n\t// \t\t}></CreateContent>\r\n\t// \t\tif(this.state.mode!='update'){\r\n\t// \t\treturn _create;\r\n\t// \t\t}\r\n\t// \t\telse return null;\t\r\n\t//   }\r\n\r\n\t  createController() {\r\n\t\t  let _button;\r\n\t\tif(this.state.mode ==='read' || this.state.mode === 'update'){\r\n\t\t\t_button = <Control onChangeMode={function(_mode){\r\n\t\t\t\tif(_mode === 'delete'){\r\n\t\t\t\t\tif(window.confirm('really?')){\r\n\t\t\t\t\t\tlet _content = Array.from(this.state.contents);\r\n\t\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\t\twhile(i<this.state.contents.length){\r\n\t\t\t\t\t\tif(_content[i].id === this.state.selected_content_id){\r\n\t\t\t\t\t\t\t_content.splice(i,1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti =i+1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tmode:'list',\r\n\t\t\t\t\t\tcontents:_content,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\talert('deleted!');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\tthis.setState({\r\n\t\t\t\tmode:_mode\r\n\t\t\t\t});\t\t\t\r\n\t\t\t}\r\n\t\t\t}.bind(this)}></Control>\r\n\t\t\treturn _button;\r\n\t\t} \r\n\t\tif (this.state.mode ==='list') {\r\n\t\t\t_button = <Button onClick = {function(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.setState({mode: 'create'})\r\n\t\t\t}.bind(this)}type=\"button\">Write</Button>\r\n\t\t\treturn _button;\r\n\t\t}\t  \r\n\t\telse return null;\r\n\t  }\r\n\r\n\t  createList(){\r\n\t\t  if(this.state.mode === 'list'){\r\n\t\t\tlet _list = <TOC onChangePage = {\r\n\t\t\t\tfunction(id){ \r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tmode:'read',\r\n\t\t\t\t\tselected_content_id:Number(id)//문자를 숫자로 변경해주는 함수 Number\r\n\t\t\t\t});\r\n\t\t\t\t}.bind(this)\r\n\t\t\t} data={this.state.contents}></TOC>\r\n\t\t\treturn _list;\r\n\t\t}\r\n\t\treturn null;\r\n\t  }\r\n\r\n\t  render(){\r\n    \r\n\t\treturn(\r\n\t\t<div className=\"Board\">\r\n\t\t\t<Subject title={this.state.subject.title} \r\n\t\t\tsub={this.state.subject.sub}\r\n\t\t\tonChangePage={function(){\r\n\t\t\tthis.setState({mode:'list'});\r\n\t\t\t\r\n\t\t\t}.bind(this)}\r\n\t\t\t></Subject>\r\n\r\n\t\t\t{this.createList()}\r\n\r\n\t\t\t{this.getContent()}\r\n\t\t\t\r\n\t\t\t{this.createController()}\r\n\r\n\t\t\t<Button onClick = {function(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.setState({mode: 'create'})\r\n\t\t\t}.bind(this)}type=\"button\">Write</Button>\r\n\r\n\t\t\t\r\n\t\t\r\n\t\t\t{/* {this.creatArticle()} */}\r\n\t\t</div>\r\n\t\t);\r\n\t  }\r\n\t}\r\n\r\n\r\nexport default Board;"]},"metadata":{},"sourceType":"module"}