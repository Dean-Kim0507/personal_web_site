{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from\"react-redux\";import{Navbar,Nav,Image,Modal,Button,Col,Spinner}from'react-bootstrap';import{logout}from\"../Actions/auth\";import{useHistory}from\"react-router-dom\";import AuthService from\"../Services/Auth.service\";import{v_session_expired}from\"./message\";import{loginValid}from\"../Actions/auth\";function MainNav(props){var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useSelector=useSelector(function(state){return state.auth;}),isLoggedIn=_useSelector.isLoggedIn,user=_useSelector.user;var basicProfileImgPath=\"./uploadImages/icon/img_user.jpg\";var IMG_WIDTH=45;var IMG_LENGTH=50;var imagePath;var history=useHistory();var logOut=function logOut(){setLoading(true);dispatch(logout());};if(isLoggedIn){imagePath=user.profileImg;if(imagePath!=null){imagePath=imagePath.substring(16,imagePath.length);}else imagePath=basicProfileImgPath;}// useEffect(() => {\n// \tif (message == UNAUTHORIZED) {\n// \t\tdispatch({\n// \t\t\ttype: SET_MESSAGE,\n// \t\t\tpayload: null,\n// \t\t});\n// \t\thistory.push('/login');\n// \t}\n// }, [message])\nuseEffect(function(){if(isLoggedIn){dispatch(loginValid());history.push('/login');}},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Navbar,{collapseOnSelect:true,expand:\"lg\",bg:\"dark\",variant:\"dark\",fixed:\"top\"}),/*#__PURE__*/React.createElement(Navbar,{collapseOnSelect:true,expand:\"lg\",bg:\"dark\",variant:\"dark\",fixed:\"top\"},/*#__PURE__*/React.createElement(Navbar.Toggle,{\"aria-controls\":\"responsive-navbar-nav\"}),/*#__PURE__*/React.createElement(Navbar.Collapse,{id:\"mainNav\"},/*#__PURE__*/React.createElement(Navbar.Brand,{href:\"/home\"},/*#__PURE__*/React.createElement(Image,{src:\"./uploadImages/icon/dh_icon.gif\",width:\"80\",height:\"60\",className:\"d-inline-block align-top\"}),' '),/*#__PURE__*/React.createElement(Nav,{className:\"mr-auto\"},/*#__PURE__*/React.createElement(Nav.Link,{href:\"/home\"},\"Home\"),/*#__PURE__*/React.createElement(Nav.Link,{href:\"/bloglist\"},\"Blog\"),/*#__PURE__*/React.createElement(Nav.Link,{href:\"/resume\"},\"Resume\"),/*#__PURE__*/React.createElement(Nav.Link,{href:\"/community/communitypost\"},\"Community\")),isLoggedIn?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Image,{src:user.profileImg,width:IMG_WIDTH,height:IMG_LENGTH,alt:\"45x50\",roundedCircle:true}),/*#__PURE__*/React.createElement(Nav,null,/*#__PURE__*/React.createElement(Nav.Item,null,/*#__PURE__*/React.createElement(Nav.Link,{href:\"/myaccount\"},\"Hello, \",user.firstName,/*#__PURE__*/React.createElement(\"br\",null),\"My Account\"))),user.role==1?/*#__PURE__*/React.createElement(Nav,null,/*#__PURE__*/React.createElement(Nav.Item,null,/*#__PURE__*/React.createElement(Nav.Link,{href:\"/admin\"},\"Admin Page\"))):null):null,isLoggedIn?/*#__PURE__*/React.createElement(Nav,null,/*#__PURE__*/React.createElement(Nav.Item,null,/*#__PURE__*/React.createElement(Nav.Link,{onClick:handleShow},\"Logout\"))):/*#__PURE__*/React.createElement(Nav,null,/*#__PURE__*/React.createElement(Nav.Item,null,/*#__PURE__*/React.createElement(Nav.Link,{href:\"/login\"},\"Login\"))))),/*#__PURE__*/React.createElement(Modal,{show:show,onHide:handleClose},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true}),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"h5\",null,\"Are you sure you want to Logout?\"),/*#__PURE__*/React.createElement(Col,{md:{span:3,offset:9}},loading?/*#__PURE__*/React.createElement(Button,{variant:\"light\",href:\"/login\",onClick:logOut},/*#__PURE__*/React.createElement(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"})):/*#__PURE__*/React.createElement(Button,{variant:\"light\",href:\"/login\",onClick:logOut},\"Logout\")))),/*#__PURE__*/React.createElement(\"hr\",null));}export default MainNav;","map":{"version":3,"sources":["C:/Users/834043/Desktop/study/Personal_Web_Site/client/src/Components/MainNav.jsx"],"names":["React","useEffect","useState","useSelector","useDispatch","Navbar","Nav","Image","Modal","Button","Col","Spinner","logout","useHistory","AuthService","v_session_expired","loginValid","MainNav","props","dispatch","show","setShow","handleClose","handleShow","loading","setLoading","state","auth","isLoggedIn","user","basicProfileImgPath","IMG_WIDTH","IMG_LENGTH","imagePath","history","logOut","profileImg","substring","length","push","firstName","role","span","offset"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Navbar, Nav, Image, Modal, Button, Col, Spinner } from 'react-bootstrap';\r\nimport { logout } from \"../Actions/auth\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AuthService from \"../Services/Auth.service\";\r\n\r\nimport {\r\n\tv_session_expired\r\n} from \"./message\";\r\nimport { loginValid } from \"../Actions/auth\";\r\n\r\nfunction MainNav(props) {\r\n\tconst dispatch = useDispatch();\r\n\tconst [show, setShow] = useState(false);\r\n\tconst handleClose = () => setShow(false);\r\n\tconst handleShow = () => setShow(true);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst { isLoggedIn, user } = useSelector(state => state.auth);\r\n\tconst basicProfileImgPath = \"./uploadImages/icon/img_user.jpg\";\r\n\tconst IMG_WIDTH = 45;\r\n\tconst IMG_LENGTH = 50;\r\n\tlet imagePath;\r\n\tlet history = useHistory();\r\n\r\n\tconst logOut = () => {\r\n\t\tsetLoading(true);\r\n\t\tdispatch(logout());\r\n\t};\r\n\r\n\tif (isLoggedIn) {\r\n\t\timagePath = user.profileImg;\r\n\t\tif (imagePath != null) {\r\n\t\t\timagePath = imagePath.substring(16, imagePath.length);\r\n\t\t}\r\n\t\telse imagePath = basicProfileImgPath;\r\n\t}\r\n\r\n\t// useEffect(() => {\r\n\t// \tif (message == UNAUTHORIZED) {\r\n\t// \t\tdispatch({\r\n\t// \t\t\ttype: SET_MESSAGE,\r\n\t// \t\t\tpayload: null,\r\n\t// \t\t});\r\n\t// \t\thistory.push('/login');\r\n\t// \t}\r\n\t// }, [message])\r\n\tuseEffect(() => {\r\n\t\tif (isLoggedIn) {\r\n\t\t\tdispatch(loginValid());\r\n\t\t\thistory.push('/login');\r\n\t\t}\r\n\t}, [])\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\" fixed=\"top\">\r\n\t\t\t</Navbar>\r\n\t\t\t<Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\" fixed=\"top\">\r\n\t\t\t\t<Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n\t\t\t\t<Navbar.Collapse id=\"mainNav\">\r\n\t\t\t\t\t<Navbar.Brand href=\"/home\">\r\n\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\tsrc=\"./uploadImages/icon/dh_icon.gif\"\r\n\t\t\t\t\t\t\twidth=\"80\"\r\n\t\t\t\t\t\t\theight=\"60\"\r\n\t\t\t\t\t\t\tclassName=\"d-inline-block align-top\"\r\n\t\t\t\t\t\t/>{' '}\r\n\t\t\t\t\t\t{/* DEAN'S */}\r\n\t\t\t\t\t</Navbar.Brand>\r\n\t\t\t\t\t<Nav className=\"mr-auto\">\r\n\t\t\t\t\t\t<Nav.Link href=\"/home\">Home</Nav.Link>\r\n\t\t\t\t\t\t<Nav.Link href=\"/bloglist\">Blog</Nav.Link>\r\n\t\t\t\t\t\t<Nav.Link href=\"/resume\">Resume</Nav.Link>\r\n\t\t\t\t\t\t<Nav.Link href=\"/community/communitypost\">Community</Nav.Link>\r\n\t\t\t\t\t</Nav>\r\n\t\t\t\t\t{isLoggedIn ?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Image src={user.profileImg}\r\n\t\t\t\t\t\t\t\twidth={IMG_WIDTH}\r\n\t\t\t\t\t\t\t\theight={IMG_LENGTH}\r\n\t\t\t\t\t\t\t\talt=\"45x50\"\r\n\t\t\t\t\t\t\t\troundedCircle />\r\n\t\t\t\t\t\t\t<Nav>\r\n\t\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t\t<Nav.Link href=\"/myaccount\">Hello, {user.firstName}<br />My Account</Nav.Link>\r\n\t\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t\t{user.role == 1 ?\r\n\t\t\t\t\t\t\t\t<Nav>\r\n\t\t\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Nav.Link href=\"/admin\">Admin Page</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{isLoggedIn ?\r\n\t\t\t\t\t\t<Nav>\r\n\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t<Nav.Link onClick={handleShow}>Logout</Nav.Link>\r\n\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t: <Nav>\r\n\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t<Nav.Link href=\"/login\">Login</Nav.Link>\r\n\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Navbar.Collapse>\r\n\t\t\t</Navbar>\r\n\t\t\t<Modal show={show} onHide={handleClose}>\r\n\t\t\t\t<Modal.Header closeButton />\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<h5>Are you sure you want to Logout?</h5>\r\n\t\t\t\t\t<Col md={{ span: 3, offset: 9 }}>\r\n\t\t\t\t\t\t{loading ?\r\n\t\t\t\t\t\t\t<Button variant=\"light\" href=\"/login\" onClick={logOut} >\r\n\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\tas=\"span\"\r\n\t\t\t\t\t\t\t\t\tanimation=\"border\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\trole=\"status\"\r\n\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t: <Button variant=\"light\" href=\"/login\" onClick={logOut} >\r\n\t\t\t\t\t\t\t\tLogout\r\n          \t\t\t\t</Button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t</Modal>\r\n\t\t\t<hr />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default MainNav;"]},"metadata":{},"sourceType":"module"}