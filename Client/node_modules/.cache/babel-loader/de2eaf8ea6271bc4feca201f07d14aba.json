{"ast":null,"code":"import React, { useState, useEffect } from 'react';\nimport { Button, Card, Accordion, InputGroup, FormControl, ListGroup, Modal } from 'react-bootstrap';\nimport { useHistory } from \"react-router-dom\";\nimport axios from 'axios';\n\nfunction BlogComments(props) {\n  let [comments, setComments] = useState(null); // let [comment_id, setComment_id] = useState(null);\n\n  let [seeMode, setSeeMode] = useState('See More');\n  let [seeMode_commentSubmitButton, setCommentButton] = useState(true);\n  let [comment_form_control_value, setComment_form_control_value] = useState(null);\n  let blog_id = props.id;\n  let key_blogComments = -1;\n  let _uploadResult = '';\n  let history = useHistory();\n  let commentMode = ''; // const comment_id = props.comment_id;\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const sendComment = async e => {\n    e.preventDefault();\n    let comment = {\n      body: e.target.comment_form_control.value,\n      blog_id: blog_id,\n      commentMode: 'create'\n    };\n    await axios.post(\"/blog/comments\", comment).then(response => {\n      _uploadResult = response.data;\n\n      if (_uploadResult === 'Upload success') {\n        setComments(comments => [comment.body, ...comments]);\n        setComment_form_control_value('');\n      } else history.push('/errorpage');\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const commentSubmitButton = e => {\n    let comment = e.target.value;\n    setComment_form_control_value(comment);\n    console.log(comment);\n    if (comment.length > 0) setCommentButton(false);else setCommentButton(true);\n  };\n\n  const delete_comment = () => {\n    handleClose();\n  };\n\n  const changeSeeMode = () => {\n    if (seeMode === 'See More') setSeeMode('See Less');else setSeeMode('See More');\n  };\n\n  useEffect(() => {\n    let comment = {\n      blog_id: blog_id,\n      commentMode: ''\n    };\n    axios.post(\"/blog/comments\", comment).then(response => {\n      console.log(response.data); // setComments(response.data);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n}\n\nexport default BlogComments;","map":{"version":3,"sources":["C:/Users/834043/Desktop/study/Personal_Web_Site/client/src/Components/BlogComponents/BlogComments.js"],"names":["React","useState","useEffect","Button","Card","Accordion","InputGroup","FormControl","ListGroup","Modal","useHistory","axios","BlogComments","props","comments","setComments","seeMode","setSeeMode","seeMode_commentSubmitButton","setCommentButton","comment_form_control_value","setComment_form_control_value","blog_id","id","key_blogComments","_uploadResult","history","commentMode","show","setShow","handleClose","handleShow","sendComment","e","preventDefault","comment","body","target","comment_form_control","value","post","then","response","data","push","catch","error","console","log","commentSubmitButton","length","delete_comment","changeSeeMode"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Button, Card, Accordion, InputGroup, FormControl, ListGroup, Modal } from 'react-bootstrap';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from 'axios';\r\n\r\nfunction BlogComments(props) {\r\n\r\n\tlet [comments, setComments] = useState(null);\r\n\t// let [comment_id, setComment_id] = useState(null);\r\n\tlet [seeMode, setSeeMode] = useState('See More');\r\n\tlet [seeMode_commentSubmitButton, setCommentButton] = useState(true);\r\n\tlet [comment_form_control_value, setComment_form_control_value] = useState(null);\r\n\tlet blog_id = props.id;\r\n\tlet key_blogComments = -1;\r\n\tlet _uploadResult = '';\r\n\tlet history = useHistory();\r\n\tlet commentMode = '';\r\n\t// const comment_id = props.comment_id;\r\n\tconst [show, setShow] = useState(false);\r\n\tconst handleClose = () => setShow(false);\r\n\tconst handleShow = () => setShow(true);\r\n\r\n\tconst sendComment = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tlet comment =\r\n\t\t{\r\n\t\t\tbody: e.target.comment_form_control.value,\r\n\t\t\tblog_id: blog_id,\r\n\t\t\tcommentMode: 'create'\r\n\t\t}\r\n\t\tawait axios.post(\"/blog/comments\", comment)\r\n\t\t\t.then(\r\n\t\t\t\tresponse => {\r\n\t\t\t\t\t_uploadResult = response.data;\r\n\t\t\t\t\tif (_uploadResult === 'Upload success') {\r\n\t\t\t\t\t\tsetComments(comments => [comment.body, ...comments]);\r\n\t\t\t\t\t\tsetComment_form_control_value('');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse history.push('/errorpage');\r\n\t\t\t\t})\r\n\t\t\t.catch(function (error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t});\r\n\t}\r\n\r\n\tconst commentSubmitButton = (e) => {\r\n\t\tlet comment = e.target.value;\r\n\t\tsetComment_form_control_value(comment);\r\n\t\tconsole.log(comment)\r\n\t\tif (comment.length > 0) setCommentButton(false);\r\n\t\telse setCommentButton(true);\r\n\t}\r\n\r\n\tconst delete_comment = () => {\r\n\r\n\t\thandleClose();\r\n\t}\r\n\r\n\tconst changeSeeMode = () => {\r\n\t\tif (seeMode === 'See More') setSeeMode('See Less');\r\n\t\telse setSeeMode('See More');\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tlet comment =\r\n\t\t{\r\n\t\t\tblog_id: blog_id,\r\n\t\t\tcommentMode: ''\r\n\t\t}\r\n\r\n\t\taxios.post(\"/blog/comments\", comment)\r\n\t\t\t.then(response => {\r\n\t\t\t\tconsole.log(response.data);\r\n\t\t\t\t// setComments(response.data);\r\n\t\t\t})\r\n\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{/* <form action='' method=\"post\" onSubmit={sendComment}>\r\n\t\t\t\t<Accordion >\r\n\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t<Card.Header>\r\n\t\t\t\t\t\t\t{comments.blog_comment[0]}\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t(comments.length === 0) ? <small>No comment</small> :\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" size=\"sm\" onClick={handleShow} className=\"blogComments_deleteButton\">Delete</Button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<Accordion.Toggle as={Button} variant=\"link\" eventKey=\"0\">\r\n\t\t\t\t\t\t\t\t\t\t\t<small onClick={changeSeeMode}>{seeMode}</small>\r\n\t\t\t\t\t\t\t\t\t\t</Accordion.Toggle>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Card.Header>\r\n\t\t\t\t\t\t<Accordion.Collapse eventKey=\"0\">\r\n\t\t\t\t\t\t\t<ListGroup variant=\"flush\">\r\n\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t// To show the first comment at the top (first comment is substracted)\r\n\t\t\t\t\t\t\t\t\tcomments.slice(1, comments.length).map((data, i) => {\r\n\t\t\t\t\t\t\t\t\t\tkey_blogComments = key_blogComments + 1;\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<ListGroup.Item key={data.id}>{data.comments}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" size=\"sm\" onClick={handleShow} className=\"blogComments_deleteButton\">Delete</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t\t</Accordion.Collapse>\r\n\t\t\t\t\t\t<Modal show={show} onHide={handleClose}>\r\n\t\t\t\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t\t\t\t<Modal.Title>Delete it ?</Modal.Title>\r\n\t\t\t\t\t\t\t</Modal.Header>\r\n\t\t\t\t\t\t\t<Modal.Body> Delete this comment, permanently ?</Modal.Body>\r\n\t\t\t\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t\t\t\t<Button variant=\"secondary\" onClick={handleClose}>\r\n\t\t\t\t\t\t\t\t\tCancel\r\n          \t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button variant=\"primary\" onClick={delete_comment}>\r\n\t\t\t\t\t\t\t\t\tDelete\r\n          \t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Modal.Footer>\r\n\t\t\t\t\t\t</Modal>\r\n\r\n\t\t\t\t\t\t<InputGroup className=\"comment_input_group\">\r\n\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\tplaceholder=\"Comment\"\r\n\t\t\t\t\t\t\t\taria-label=\"Comment\"\r\n\t\t\t\t\t\t\t\taria-describedby=\"blog_comment\"\r\n\t\t\t\t\t\t\t\tname=\"comment_form_control\"\r\n\t\t\t\t\t\t\t\tonChange={commentSubmitButton}\r\n\t\t\t\t\t\t\t\tvalue={comment_form_control_value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<InputGroup.Append>\r\n\t\t\t\t\t\t\t\t<Button variant=\"outline-secondary\" type=\"submit\" disabled={seeMode_commentSubmitButton}>Submit</Button>\r\n\t\t\t\t\t\t\t</InputGroup.Append>\r\n\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Accordion>\r\n\t\t\t</form> */}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default BlogComments;"]},"metadata":{},"sourceType":"module"}