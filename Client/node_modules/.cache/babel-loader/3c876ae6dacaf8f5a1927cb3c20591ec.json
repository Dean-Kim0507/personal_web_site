{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\client\\\\src\\\\Components\\\\MainNav.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Navbar, Nav, Image, Modal, Button, Col, Spinner } from 'react-bootstrap';\nimport { logout } from \"../Actions/auth\";\nimport { useHistory, withRouter, Link } from \"react-router-dom\";\nimport { Redirect } from 'react-router-dom';\nimport AuthService from \"../Services/Auth.service\";\nimport axios from \"axios\";\nimport authHeader from \"../Services/Auth.header\"; // import { Link } from 'react-router';\n\nimport body from '../Body';\n\nfunction MainNav(props) {\n  const dispatch = useDispatch();\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const [loading, setLoading] = useState(false);\n  const {\n    isLoggedIn,\n    user\n  } = useSelector(state => state.auth);\n  const basicProfileImgPath = \"./uploadImages/icon/img_user.jpg\";\n  const IMG_WIDTH = 45;\n  const IMG_LENGTH = 50;\n  let history = useHistory();\n\n  const logOut = () => {\n    setLoading(true);\n    dispatch(logout());\n  };\n\n  console.log(user);\n  let imagePath;\n\n  if (isLoggedIn) {\n    imagePath = user.profileImg;\n\n    if (imagePath != null) {\n      imagePath = imagePath.substring(16, imagePath.length);\n    } else imagePath = basicProfileImgPath;\n  }\n\n  const FilterLink = () => /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 28\n    }\n  });\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      console.log('Login valid'); // axios.get(\"/islogedin\", { headers: authHeader() })\n\n      AuthService.loginValid() // .then((res) => {\n      // \tconsole.log(res);\n      // })\n      .catch(error => {\n        alert('Session'); // props.history.push('/home');\n        // FilterLink();\n        // body.goToHome();\n\n        logOut(); // () => <Redirect to=\"/home\" />;\n      });\n      console.log('MainNav LoginValid: ', isLoggedIn);\n    } // else {\n    // \t// <Redirect to=\"/home\" />;\n    // \t// history.push('/home');\n    // }\n\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    collapseOnSelect: true,\n    expand: \"lg\",\n    bg: \"dark\",\n    variant: \"dark\",\n    fixed: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(Navbar, {\n    collapseOnSelect: true,\n    expand: \"lg\",\n    bg: \"dark\",\n    variant: \"dark\",\n    fixed: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Navbar.Toggle, {\n    \"aria-controls\": \"responsive-navbar-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Navbar.Collapse, {\n    id: \"mainNav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar.Brand, {\n    href: \"/home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: \"./uploadImages/icon/dh_icon.gif\",\n    width: \"60\",\n    height: \"40\",\n    className: \"d-inline-block align-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }), ' '), /*#__PURE__*/React.createElement(Nav, {\n    className: \"mr-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    href: \"/home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, \"Home\"), /*#__PURE__*/React.createElement(Nav.Link, {\n    href: \"/bloglist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, \"Blog\"), /*#__PURE__*/React.createElement(Nav.Link, {\n    href: \"/resume\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, \"Resume\"), /*#__PURE__*/React.createElement(Nav.Link, {\n    disabled: true,\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, \"My Project\"), /*#__PURE__*/React.createElement(Nav.Link, {\n    href: \"/community\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, \"Community\")), isLoggedIn ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Image, {\n    src: imagePath,\n    width: IMG_WIDTH,\n    height: IMG_LENGTH,\n    alt: \"171x180\",\n    roundedCircle: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    href: \"/myaccount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 10\n    }\n  }, \"Hello, \", user.firstName, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 61\n    }\n  }), \"My Account\")))) : null, isLoggedIn ? /*#__PURE__*/React.createElement(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    onClick: handleShow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, \"Logout\"))) : /*#__PURE__*/React.createElement(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    href: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, \"Login\"))))), /*#__PURE__*/React.createElement(Modal, {\n    show: show,\n    onHide: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 6\n    }\n  }, \"Are you sure you want to Logout?\"), /*#__PURE__*/React.createElement(Col, {\n    md: {\n      span: 3,\n      offset: 9\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 6\n    }\n  }, loading ? /*#__PURE__*/React.createElement(Button, {\n    variant: \"light\",\n    href: \"/login\",\n    onClick: logOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    as: \"span\",\n    animation: \"border\",\n    size: \"sm\",\n    role: \"status\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  })) : /*#__PURE__*/React.createElement(Button, {\n    variant: \"light\",\n    href: \"/login\",\n    onClick: logOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 10\n    }\n  }, \"Logout\")))), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 4\n    }\n  }));\n}\n\nexport default MainNav;","map":{"version":3,"sources":["C:/Users/834043/Desktop/study/Personal_Web_Site/client/src/Components/MainNav.jsx"],"names":["React","useEffect","useState","useSelector","useDispatch","Navbar","Nav","Image","Modal","Button","Col","Spinner","logout","useHistory","withRouter","Link","Redirect","AuthService","axios","authHeader","body","MainNav","props","dispatch","show","setShow","handleClose","handleShow","loading","setLoading","isLoggedIn","user","state","auth","basicProfileImgPath","IMG_WIDTH","IMG_LENGTH","history","logOut","console","log","imagePath","profileImg","substring","length","FilterLink","loginValid","catch","error","alert","firstName","span","offset"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Navbar, Nav, Image, Modal, Button, Col, Spinner } from 'react-bootstrap';\r\nimport { logout } from \"../Actions/auth\";\r\nimport { useHistory, withRouter, Link } from \"react-router-dom\";\r\nimport { Redirect } from 'react-router-dom';\r\nimport AuthService from \"../Services/Auth.service\";\r\nimport axios from \"axios\";\r\nimport authHeader from \"../Services/Auth.header\";\r\n// import { Link } from 'react-router';\r\nimport body from '../Body'\r\n\r\nfunction MainNav(props) {\r\n\tconst dispatch = useDispatch();\r\n\tconst [show, setShow] = useState(false);\r\n\tconst handleClose = () => setShow(false);\r\n\tconst handleShow = () => setShow(true);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst { isLoggedIn, user } = useSelector(state => state.auth);\r\n\tconst basicProfileImgPath = \"./uploadImages/icon/img_user.jpg\";\r\n\tconst IMG_WIDTH = 45;\r\n\tconst IMG_LENGTH = 50;\r\n\tlet history = useHistory();\r\n\r\n\tconst logOut = () => {\r\n\t\tsetLoading(true);\r\n\t\tdispatch(logout());\r\n\t};\r\n\tconsole.log(user)\r\n\tlet imagePath;\r\n\r\n\tif (isLoggedIn) {\r\n\t\timagePath = user.profileImg;\r\n\t\tif (imagePath != null) {\r\n\t\t\timagePath = imagePath.substring(16, imagePath.length);\r\n\t\t}\r\n\t\telse imagePath = basicProfileImgPath;\r\n\t}\r\n\tconst FilterLink = () => (<Redirect to=\"/home\" />);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isLoggedIn) {\r\n\t\t\tconsole.log('Login valid')\r\n\t\t\t// axios.get(\"/islogedin\", { headers: authHeader() })\r\n\t\t\tAuthService.loginValid()\r\n\t\t\t\t// .then((res) => {\r\n\t\t\t\t// \tconsole.log(res);\r\n\t\t\t\t// })\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\talert('Session');\r\n\t\t\t\t\t// props.history.push('/home');\r\n\t\t\t\t\t// FilterLink();\r\n\t\t\t\t\t// body.goToHome();\r\n\t\t\t\t\tlogOut();\r\n\t\t\t\t\t// () => <Redirect to=\"/home\" />;\r\n\t\t\t\t})\r\n\t\t\tconsole.log('MainNav LoginValid: ', isLoggedIn);\r\n\t\t}\r\n\t\t// else {\r\n\t\t// \t// <Redirect to=\"/home\" />;\r\n\t\t// \t// history.push('/home');\r\n\t\t// }\r\n\r\n\t}, [])\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\" fixed=\"top\">\r\n\r\n\t\t\t</Navbar>\r\n\t\t\t<Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\" fixed=\"top\">\r\n\t\t\t\t<Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n\t\t\t\t<Navbar.Collapse id=\"mainNav\">\r\n\t\t\t\t\t<Navbar.Brand href=\"/home\">\r\n\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\tsrc=\"./uploadImages/icon/dh_icon.gif\"\r\n\t\t\t\t\t\t\twidth=\"60\"\r\n\t\t\t\t\t\t\theight=\"40\"\r\n\t\t\t\t\t\t\tclassName=\"d-inline-block align-top\"\r\n\t\t\t\t\t\t/>{' '}\r\n\t\t\t\t\t\t{/* DEAN'S */}\r\n\t\t\t\t\t</Navbar.Brand>\r\n\t\t\t\t\t<Nav className=\"mr-auto\">\r\n\t\t\t\t\t\t<Nav.Link href=\"/home\">Home</Nav.Link>\r\n\t\t\t\t\t\t<Nav.Link href=\"/bloglist\">Blog</Nav.Link>\r\n\t\t\t\t\t\t<Nav.Link href=\"/resume\">Resume</Nav.Link>\r\n\t\t\t\t\t\t<Nav.Link disabled href=\"#\">My Project</Nav.Link>\r\n\t\t\t\t\t\t<Nav.Link href=\"/community\">Community</Nav.Link>\r\n\t\t\t\t\t</Nav>\r\n\t\t\t\t\t{isLoggedIn ?\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Image src={imagePath}\r\n\t\t\t\t\t\t\t\twidth={IMG_WIDTH}\r\n\t\t\t\t\t\t\t\theight={IMG_LENGTH}\r\n\t\t\t\t\t\t\t\talt=\"171x180\"\r\n\t\t\t\t\t\t\t\troundedCircle />\r\n\t\t\t\t\t\t\t<Nav>\r\n\t\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t\t<Nav.Link href=\"/myaccount\">Hello, {user.firstName}<br />My Account</Nav.Link>\r\n\t\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t: null\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{isLoggedIn ?\r\n\t\t\t\t\t\t<Nav>\r\n\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t<Nav.Link onClick={handleShow}>Logout</Nav.Link>\r\n\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t: <Nav>\r\n\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t<Nav.Link href=\"/login\">Login</Nav.Link>\r\n\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Navbar.Collapse>\r\n\t\t\t</Navbar>\r\n\t\t\t<Modal show={show} onHide={handleClose}>\r\n\t\t\t\t<Modal.Header closeButton />\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<h5>Are you sure you want to Logout?</h5>\r\n\t\t\t\t\t<Col md={{ span: 3, offset: 9 }}>\r\n\t\t\t\t\t\t{loading ?\r\n\t\t\t\t\t\t\t<Button variant=\"light\" href=\"/login\" onClick={logOut} >\r\n\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\tas=\"span\"\r\n\t\t\t\t\t\t\t\t\tanimation=\"border\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\trole=\"status\"\r\n\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t: <Button variant=\"light\" href=\"/login\" onClick={logOut} >\r\n\t\t\t\t\t\t\t\tLogout\r\n          \t\t\t\t</Button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t<hr />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default MainNav;"]},"metadata":{},"sourceType":"module"}