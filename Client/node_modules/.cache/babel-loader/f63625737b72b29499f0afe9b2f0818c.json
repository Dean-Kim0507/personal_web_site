{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import TOC from\"./Components/TOC\";import ReadContent from\"./Components/ReadContent\";import Subject from\"./Components/Subject\";import Control from\"./Components/Control\";import UpdateContent from\"./Components/UpdateContent\";import CreateContent from'./Components/CreateContent';import axios from'axios';import{Button,Row,Col,Container}from'react-bootstrap';import'../../css/Community.css';import CommunityNav from'./CommunityNav';var format=require('date-format');// Use class\nvar CommunityPost=/*#__PURE__*/function(_Component){_inherits(CommunityPost,_Component);var _super=_createSuper(CommunityPost);function CommunityPost(props){var _this;_classCallCheck(this,CommunityPost);_this=_super.call(this,props);_this.state={mode:'list',selected_content_id:0,contents:[],type:props.match.params.type,subject:\"Community Post\",subtitle:\"This is the area of OPEN POST! Please feel free to leave anything you want to share with us. Have a fun!\"};return _this;}// receive data by using fetch\n_createClass(CommunityPost,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.props);if(this.state.type==='feedbackpost'){this.setState({subject:\"Feed Back Post\",subtitle:\"Feel free to leave any feed back for this web page!\"});}axios.post('/communitypost/senddata',{type:this.state.type}).then(function(response){_this2.setState(function(){return{contents:response.data.data};});// console.log('data: ', response.data);\n});}// receive data by using axios (don't need to convert)\n},{key:\"setData\",value:function(){var _setData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_id,_writer,_title,_desc,_mode){var _this3=this;var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('setData()');data={id:_id,writer:_writer,title:_title,desc:_desc,mode:_mode,type:this.state.type};_context.next=4;return axios.post('/communitypost/receivedata',data).then(function(response){console.log(response.data);_this3.setState(function(){return{contents:response.data.data};});})// {this.setState({contents: response.data.rows[1]})})\n.catch(function(error){console.log(error);});case 4:case\"end\":return _context.stop();}}},_callee,this);}));function setData(_x,_x2,_x3,_x4,_x5){return _setData.apply(this,arguments);}return setData;}()},{key:\"getReadContent\",value:function getReadContent(){var i=0;while(i<this.state.contents.length){var data=this.state.contents[i];if(data.id===this.state.selected_content_id){return data;}i=i+1;}}},{key:\"getContent\",value:function getContent(){var _article,_content=null;if(this.state.mode==='list'){_article=/*#__PURE__*/React.createElement(TOC,{onChangePage:/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.setState({mode:'read',selected_content_id:Number(id)});case 2:case\"end\":return _context2.stop();}}},_callee2,this);}));return function(_x6){return _ref.apply(this,arguments);};}().bind(this),data:this.state.contents});return _article;}//read\nelse if(this.state.mode==='read'){_content=this.getReadContent();var date;if(_content.createdAt===_content.updatedAt){date=format.asString('hh:mm, MM-dd-yyyy',new Date(_content.createdAt));}else date=format.asString('hh:mm, MM-dd-yyyy',new Date(_content.updatedAt))+' (Edited)';_article=/*#__PURE__*/React.createElement(ReadContent,{id:_content.id,writer:_content.writer,title:_content.title,desc:_content.desc,date:date});}// Update\nelse if(this.state.mode==='update'){_content=this.getReadContent();_article=/*#__PURE__*/React.createElement(UpdateContent,{data:_content,onSubmit:function(_id,_writer,_title,_desc){//add content to this.state.cotnents\nthis.setData(_id,_writer,_title,_desc,'update');this.setState({mode:'read'});}.bind(this)});}//create\nelse if(this.state.mode==='create'){_article=/*#__PURE__*/React.createElement(CreateContent,{onSubmit:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_writer,_title,_desc){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.setData(0,_writer,_title,_desc,'create');case 2:_context3.next=4;return this.setState({selected_content_id:this.state.contents[this.state.contents.length-1].id,mode:'read'});case 4:case\"end\":return _context3.stop();}}},_callee3,this);}));return function(_x7,_x8,_x9){return _ref2.apply(this,arguments);};}().bind(this)});}return _article;}},{key:\"createController\",value:function createController(){var _button;if(this.state.mode==='read'){console.log('createController()');_button=/*#__PURE__*/React.createElement(Control,{onChangeMode:function(_mode){//delete\nif(_mode==='delete'){if(window.confirm('Are you sure to delete this post?')){console.log(this.state.selected_content_id);this.setData(this.state.selected_content_id,'','','','delete');this.setState({mode:'list',selected_content_id:0});alert('Delete Success!');}}else{this.setState({mode:_mode});}}.bind(this)});return _button;}else{return null;}}},{key:\"createPost\",value:function createPost(){var _post;if(this.state.mode!=='create'&&this.state.mode!=='update'){_post=/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function(e){e.preventDefault();this.setState({mode:'create'});}.bind(this),type:\"button\"},\"Add New Post\");return _post;}else return null;}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"CommunityPost\"},/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{xs:2,id:\"sidebar-wrapper\"},/*#__PURE__*/React.createElement(CommunityNav,null)),/*#__PURE__*/React.createElement(Col,{xs:10,id:\"page-content-wrapper\"},/*#__PURE__*/React.createElement(Subject,{title:this.state.subject,sub:this.state.subtitle,onChangePage:function(){this.setState({mode:'list'});}.bind(this)}),/*#__PURE__*/React.createElement(\"br\",null),this.getContent(),this.createController(),this.createPost()))));}}]);return CommunityPost;}(Component);export default CommunityPost;","map":{"version":3,"sources":["C:/Users/834043/Desktop/study/Personal_Web_Site/client/src/Components/CommunityComponents/CommunityPost.jsx"],"names":["React","Component","TOC","ReadContent","Subject","Control","UpdateContent","CreateContent","axios","Button","Row","Col","Container","CommunityNav","format","require","CommunityPost","props","state","mode","selected_content_id","contents","type","match","params","subject","subtitle","console","log","setState","post","then","response","data","_id","_writer","_title","_desc","_mode","id","writer","title","desc","catch","error","i","length","_article","_content","Number","bind","getReadContent","date","createdAt","updatedAt","asString","Date","setData","_button","window","confirm","alert","_post","e","preventDefault","getContent","createController","createPost"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport TOC from \"./Components/TOC\";\r\nimport ReadContent from \"./Components/ReadContent\";\r\nimport Subject from \"./Components/Subject\";\r\nimport Control from \"./Components/Control\";\r\nimport UpdateContent from \"./Components/UpdateContent\";\r\nimport CreateContent from './Components/CreateContent';\r\nimport axios from 'axios';\r\nimport { Button, Row, Col, Container } from 'react-bootstrap';\r\nimport '../../css/Community.css'\r\nimport CommunityNav from './CommunityNav';\r\n\r\nconst format = require('date-format');\r\n\r\n// Use class\r\nclass CommunityPost extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tmode: 'list',\r\n\t\t\tselected_content_id: 0,\r\n\t\t\tcontents: [],\r\n\t\t\ttype: props.match.params.type,\r\n\t\t\tsubject: \"Community Post\",\r\n\t\t\tsubtitle: \"This is the area of OPEN POST! Please feel free to leave anything you want to share with us. Have a fun!\"\r\n\t\t}\r\n\t}\r\n\t// receive data by using fetch\r\n\tcomponentDidMount() {\r\n\t\tconsole.log(this.props);\r\n\r\n\t\tif (this.state.type === 'feedbackpost') {\r\n\t\t\tthis.setState({\r\n\t\t\t\tsubject: \"Feed Back Post\",\r\n\t\t\t\tsubtitle: \"Feel free to leave any feed back for this web page!\"\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\taxios.post('/communitypost/senddata', { type: this.state.type })\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.setState(() => ({ contents: response.data.data }))\r\n\t\t\t\t// console.log('data: ', response.data);\r\n\t\t\t})\r\n\t}\r\n\r\n\t// receive data by using axios (don't need to convert)\r\n\tasync setData(_id, _writer, _title, _desc, _mode) {\r\n\t\tconsole.log('setData()');\r\n\t\tlet data = {\r\n\t\t\tid: _id,\r\n\t\t\twriter: _writer,\r\n\t\t\ttitle: _title,\r\n\t\t\tdesc: _desc,\r\n\t\t\tmode: _mode,\r\n\t\t\ttype: this.state.type\r\n\t\t}\r\n\r\n\t\tawait axios.post('/communitypost/receivedata', data)\r\n\t\t\t.then(response => {\r\n\t\t\t\tconsole.log(response.data)\r\n\t\t\t\tthis.setState(() => ({ contents: response.data.data }))\r\n\t\t\t})\r\n\t\t\t// {this.setState({contents: response.data.rows[1]})})\r\n\t\t\t.catch(function (error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t});\r\n\t}\r\n\r\n\tgetReadContent() {\r\n\t\tlet i = 0;\r\n\t\twhile (i < this.state.contents.length) {\r\n\t\t\tlet data = this.state.contents[i];\r\n\t\t\tif (data.id === this.state.selected_content_id) {\r\n\t\t\t\treturn data;\r\n\t\t\t}\r\n\t\t\ti = i + 1;\r\n\t\t}\r\n\t}\r\n\r\n\tgetContent() {\r\n\t\tlet _article, _content = null;\r\n\t\tif (this.state.mode === 'list') {\r\n\t\t\t_article = <TOC onChangePage={\r\n\t\t\t\tasync function (id) {\r\n\t\t\t\t\tawait this.setState({\r\n\t\t\t\t\t\tmode: 'read',\r\n\t\t\t\t\t\tselected_content_id: Number(id)\r\n\t\t\t\t\t});\r\n\t\t\t\t}.bind(this)\r\n\t\t\t} data={this.state.contents}></TOC>\r\n\t\t\treturn _article\r\n\t\t}\r\n\r\n\t\t//read\r\n\t\telse if (this.state.mode === 'read') {\r\n\t\t\t_content = this.getReadContent();\r\n\t\t\tlet date;\r\n\t\t\tif (_content.createdAt === _content.updatedAt) {\r\n\t\t\t\tdate = format.asString('hh:mm, MM-dd-yyyy', new Date(_content.createdAt));\r\n\t\t\t} else date = format.asString('hh:mm, MM-dd-yyyy', new Date(_content.updatedAt)) + ' (Edited)';\r\n\t\t\t_article = <ReadContent id={_content.id} writer={_content.writer} title={_content.title} desc={_content.desc} date={date} ></ReadContent>\r\n\t\t}\r\n\r\n\t\t// Update\r\n\t\telse if (this.state.mode === 'update') {\r\n\t\t\t_content = this.getReadContent();\r\n\t\t\t_article = <UpdateContent data={_content} onSubmit={\r\n\t\t\t\tfunction (_id, _writer, _title, _desc) {\r\n\t\t\t\t\t//add content to this.state.cotnents\r\n\t\t\t\t\tthis.setData(_id, _writer, _title, _desc, 'update');\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tmode: 'read'\r\n\t\t\t\t\t});\r\n\t\t\t\t}.bind(this)\r\n\t\t\t}></UpdateContent>\r\n\r\n\t\t}\r\n\r\n\t\t//create\r\n\t\telse if (this.state.mode === 'create') {\r\n\t\t\t_article = <CreateContent onSubmit={\r\n\t\t\t\tasync function (_writer, _title, _desc) {\r\n\t\t\t\t\t//add content to this.state.cotnents\r\n\t\t\t\t\tawait this.setData(0, _writer, _title, _desc, 'create');\r\n\t\t\t\t\tawait this.setState({\r\n\t\t\t\t\t\tselected_content_id: this.state.contents[this.state.contents.length - 1].id,\r\n\t\t\t\t\t\tmode: 'read'\r\n\t\t\t\t\t});\r\n\t\t\t\t}.bind(this)\r\n\t\t\t}></CreateContent>\r\n\t\t}\r\n\t\treturn _article;\r\n\t}\r\n\r\n\tcreateController() {\r\n\t\tlet _button;\r\n\t\tif (this.state.mode === 'read') {\r\n\t\t\tconsole.log('createController()');\r\n\t\t\t_button = <Control onChangeMode={function (_mode) {\r\n\t\t\t\t//delete\r\n\t\t\t\tif (_mode === 'delete') {\r\n\t\t\t\t\tif (window.confirm('Are you sure to delete this post?')) {\r\n\t\t\t\t\t\tconsole.log(this.state.selected_content_id);\r\n\t\t\t\t\t\tthis.setData(this.state.selected_content_id, '', '', '', 'delete');\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tmode: 'list',\r\n\t\t\t\t\t\t\tselected_content_id: 0\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\talert('Delete Success!');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tmode: _mode\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}.bind(this)}></Control>\r\n\t\t\treturn _button;\r\n\t\t}\r\n\t\telse { return null; }\r\n\t}\r\n\r\n\tcreatePost() {\r\n\t\tlet _post;\r\n\t\tif (this.state.mode !== 'create' && this.state.mode !== 'update') {\r\n\t\t\t_post = <Button variant=\"primary\" onClick={function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.setState({ mode: 'create' })\r\n\t\t\t}.bind(this)} type=\"button\">Add New Post</Button>\r\n\r\n\t\t\treturn _post;\r\n\t\t}\r\n\t\telse return null;\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"CommunityPost\">\r\n\t\t\t\t<Container fluid>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col xs={2} id=\"sidebar-wrapper\">\r\n\t\t\t\t\t\t\t<CommunityNav />\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={10} id=\"page-content-wrapper\">\r\n\t\t\t\t\t\t\t<Subject\r\n\t\t\t\t\t\t\t\ttitle={this.state.subject}\r\n\t\t\t\t\t\t\t\tsub={this.state.subtitle}\r\n\t\t\t\t\t\t\t\tonChangePage={function () {\r\n\t\t\t\t\t\t\t\t\tthis.setState({ mode: 'list' });\r\n\t\t\t\t\t\t\t\t}.bind(this)}\r\n\t\t\t\t\t\t\t></Subject>\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t{this.getContent()}\r\n\r\n\t\t\t\t\t\t\t{this.createController()}\r\n\r\n\t\t\t\t\t\t\t{this.createPost()}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Container>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default CommunityPost;"]},"metadata":{},"sourceType":"module"}