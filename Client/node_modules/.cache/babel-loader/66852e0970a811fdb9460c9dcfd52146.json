{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from\"react-redux\";import{Table,Image,Button}from'react-bootstrap';import{useHistory}from\"react-router-dom\";import AdminPageService from'../Services/AdminPage.service';import'../css/AdminPage.css';import{unauthorized_access}from\"./message\";import{GET_USERS_SUCCESS,USER_NOT_FOUND,GET_ALL_USERS_ADMIN,DELETE_USER_ADMIN}from\"./type\";function AdminPage(props){var _useSelector=useSelector(function(state){return state.auth;}),isLoggedIn=_useSelector.isLoggedIn,user=_useSelector.user;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var history=useHistory();var tableNum=0;var keyNumber=0;var basicProfileImgPath=\"./uploadImages/icon/img_user.jpg\";var IMG_WIDTH=45;var IMG_LENGTH=50;useEffect(function(){if(!isLoggedIn||user.role!=1){alert(unauthorized_access);history.push('/home');}AdminPageService.get_all_users(user,GET_ALL_USERS_ADMIN).then(function(response){console.log(response.data);if(response.data.message===USER_NOT_FOUND){setUsers(null);}else if(response.data.message===GET_USERS_SUCCESS){setUsers(response.data.users);}});},[]);var adminPage_delete_user=function adminPage_delete_user(data){AdminPageService.delete_usr(user,data,DELETE_USER_ADMIN).then(function(response){console.log(response.data.message);console.log(response.data.users);});};return/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true,variant:\"dark\",className:\"adminPage_table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"#\"),/*#__PURE__*/React.createElement(\"th\",null,\"User ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"First Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Last Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Username\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Picture\"),/*#__PURE__*/React.createElement(\"th\",null,\"Signing up Date\"),/*#__PURE__*/React.createElement(\"th\",null,\"Role\"),/*#__PURE__*/React.createElement(\"th\",null,\"Delete\"))),/*#__PURE__*/React.createElement(\"tbody\",null,users!=null?users.map(function(data){if(data.profile_img_path!=null){data.profile_img_path=data.profile_img_path.substring(16,data.profile_img_path.length);}else{data.profile_img_path=basicProfileImgPath;}return/*#__PURE__*/React.createElement(\"tr\",{key:tableNum},/*#__PURE__*/React.createElement(\"td\",null,++tableNum),/*#__PURE__*/React.createElement(\"td\",null,data.userID),/*#__PURE__*/React.createElement(\"td\",null,data.firstName),/*#__PURE__*/React.createElement(\"td\",null,data.lastName),/*#__PURE__*/React.createElement(\"td\",null,data.lastName),/*#__PURE__*/React.createElement(\"td\",null,data.email),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Image,{src:data.profile_img_path,width:IMG_WIDTH,height:IMG_LENGTH,alt:\"45x50\",roundedCircle:true})),/*#__PURE__*/React.createElement(\"td\",null,data.createdAt),/*#__PURE__*/React.createElement(\"td\",null,data.role_mywebsites[0].roleID===1?'Admin':'User'),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{key:keyNumber++,onClick:function onClick(){return adminPage_delete_user(data);},data1:data},\"Delete\")));}):null));}export default AdminPage;","map":{"version":3,"sources":["C:/Users/834043/Desktop/study/Personal_Web_Site/client/src/Components/AdminPage.jsx"],"names":["React","useState","useEffect","useDispatch","useSelector","Table","Image","Button","useHistory","AdminPageService","unauthorized_access","GET_USERS_SUCCESS","USER_NOT_FOUND","GET_ALL_USERS_ADMIN","DELETE_USER_ADMIN","AdminPage","props","state","auth","isLoggedIn","user","users","setUsers","message","setMessage","history","tableNum","keyNumber","basicProfileImgPath","IMG_WIDTH","IMG_LENGTH","role","alert","push","get_all_users","then","response","console","log","data","adminPage_delete_user","delete_usr","map","profile_img_path","substring","length","userID","firstName","lastName","email","createdAt","role_mywebsites","roleID"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Table, Image, Button } from 'react-bootstrap';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AdminPageService from '../Services/AdminPage.service'\r\nimport '../css/AdminPage.css';\r\nimport {\r\n\tunauthorized_access\r\n} from \"./message\";\r\nimport {\r\n\tGET_USERS_SUCCESS,\r\n\tUSER_NOT_FOUND,\r\n\tGET_ALL_USERS_ADMIN,\r\n\tDELETE_USER_ADMIN\r\n} from \"./type\";\r\n\r\nfunction AdminPage(props) {\r\n\r\n\tconst { isLoggedIn, user } = useSelector(state => state.auth);\r\n\tconst [users, setUsers] = useState(null);\r\n\tconst [message, setMessage] = useState();\r\n\tlet history = useHistory();\r\n\tlet tableNum = 0;\r\n\tlet keyNumber = 0;\r\n\tconst basicProfileImgPath = \"./uploadImages/icon/img_user.jpg\";\r\n\tconst IMG_WIDTH = 45;\r\n\tconst IMG_LENGTH = 50;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!isLoggedIn || user.role != 1) {\r\n\t\t\talert(unauthorized_access);\r\n\t\t\thistory.push('/home');\r\n\t\t}\r\n\t\tAdminPageService.get_all_users(user, GET_ALL_USERS_ADMIN)\r\n\t\t\t.then(response => {\r\n\t\t\t\tconsole.log(response.data);\r\n\t\t\t\tif (response.data.message === USER_NOT_FOUND) {\r\n\t\t\t\t\tsetUsers(null);\r\n\t\t\t\t}\r\n\t\t\t\telse if (response.data.message === GET_USERS_SUCCESS) {\r\n\t\t\t\t\tsetUsers(response.data.users);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}, [])\r\n\r\n\tconst adminPage_delete_user = data => {\r\n\r\n\t\tAdminPageService.delete_usr(user, data, DELETE_USER_ADMIN)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tconsole.log(response.data.message);\r\n\t\t\t\tconsole.log(response.data.users);\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Table striped bordered hover variant=\"dark\" className=\"adminPage_table\">\r\n\t\t\t<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>#</th>\r\n\t\t\t\t\t<th>User ID</th>\r\n\t\t\t\t\t<th>First Name</th>\r\n\t\t\t\t\t<th>Last Name</th>\r\n\t\t\t\t\t<th>Username</th>\r\n\t\t\t\t\t<th>Email</th>\r\n\t\t\t\t\t<th>Picture</th>\r\n\t\t\t\t\t<th>Signing up Date</th>\r\n\t\t\t\t\t<th>Role</th>\r\n\t\t\t\t\t<th>Delete</th>\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t{users != null ?\r\n\t\t\t\t\tusers.map(data => {\r\n\t\t\t\t\t\tif (data.profile_img_path != null) {\r\n\t\t\t\t\t\t\tdata.profile_img_path = data.profile_img_path.substring(16, data.profile_img_path.length);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse { data.profile_img_path = basicProfileImgPath; }\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<tr key={tableNum}>\r\n\t\t\t\t\t\t\t\t<td>{++tableNum}</td>\r\n\t\t\t\t\t\t\t\t<td>{data.userID}</td>\r\n\t\t\t\t\t\t\t\t<td>{data.firstName}</td>\r\n\t\t\t\t\t\t\t\t<td>{data.lastName}</td>\r\n\t\t\t\t\t\t\t\t<td>{data.lastName}</td>\r\n\t\t\t\t\t\t\t\t<td>{data.email}</td>\r\n\t\t\t\t\t\t\t\t<td><Image src={data.profile_img_path}\r\n\t\t\t\t\t\t\t\t\twidth={IMG_WIDTH}\r\n\t\t\t\t\t\t\t\t\theight={IMG_LENGTH}\r\n\t\t\t\t\t\t\t\t\talt=\"45x50\"\r\n\t\t\t\t\t\t\t\t\troundedCircle /></td>\r\n\t\t\t\t\t\t\t\t<td>{data.createdAt}</td>\r\n\t\t\t\t\t\t\t\t<td>{data.role_mywebsites[0].roleID === 1 ?\r\n\t\t\t\t\t\t\t\t\t'Admin'\r\n\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t'User'\r\n\t\t\t\t\t\t\t\t}</td>\r\n\t\t\t\t\t\t\t\t<td><Button key={keyNumber++}\r\n\t\t\t\t\t\t\t\t\tonClick={() => adminPage_delete_user(data)}\r\n\t\t\t\t\t\t\t\t\tdata1={data}\r\n\t\t\t\t\t\t\t\t>Delete</Button></td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t:\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</tbody>\r\n\t\t</Table>\r\n\t);\r\n}\r\n\r\nexport default AdminPage;"]},"metadata":{},"sourceType":"module"}