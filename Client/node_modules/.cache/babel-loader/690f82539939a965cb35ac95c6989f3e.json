{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useEffect}from\"react\";import{Rab,Row,Col,Nav,Tab,Form,Button,Alert,Spinner}from'react-bootstrap';import{useDispatch,useSelector}from\"react-redux\";import{useHistory,Link}from'react-router-dom';import ForgotService from'../Services/Forgot.service';import{FIND_ID,FIND_PASSWORD,NOT_FOUND_ID,NOT_FOUND_EMAIL,NOT_FOUND_ID_EMAIL,SEND_EMAIL_SUCCESS,SEND_EMAIL_FAIL}from\"./type\";import{e_email_notfound,e_userID_notfound,e_userID_email_notfound}from'./message';import'../css/ForgotIDPassword.css';function ForgotIDPassword(props){var _useSelector=useSelector(function(state){return state.auth;}),isLoggedIn=_useSelector.isLoggedIn,user=_useSelector.user;var _useState=useState(props.match.params.type),_useState2=_slicedToArray(_useState,2),type=_useState2[0],setType=_useState2[1];var _useState3=useState({body:null,forgot:null}),_useState4=_slicedToArray(_useState3,2),alertMessage=_useState4[0],setAlertMessage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showAlert=_useState6[0],setAlert=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),email=_useState10[0],setEmail=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),userID=_useState12[0],setUserID=_useState12[1];var history=useHistory();var findID_Password=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var _type,forgot_info;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();setLoading(true);_type=e.target.forgotIDPassword_type.value;console.log(_type);console.log('userID: ',userID,'email: ',email);if(_type===FIND_ID){forgot_info={userID:null,email:email,type:_type};}else if(_type===FIND_PASSWORD){forgot_info={userID:userID,email:email,type:_type};}_context2.next=8;return ForgotService.find_ID_password(forgot_info).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(res.data.message);if(res.data.message===NOT_FOUND_EMAIL){setLoading(false);setAlert(true);setAlertMessage({body:e_email_notfound,forgot:/*#__PURE__*/React.createElement(Link,{to:\"/registration\"},\"Sign up for an account.\")});setEmail('');}// else if (res.data.message === NOT_FOUND_ID) {\n// \tsetLoading(false);\n// \tsetAlert(true);\n// \tsetAlertMessage({\n// \t\tbody: e_userID_notfound,\n// \t\tforgot: <Link to='/registration'>Sign up for an account.</Link>\n// \t})\n// }\nelse if(res.data.message===NOT_FOUND_ID_EMAIL){setLoading(false);setAlert(true);setAlertMessage({body:e_userID_email_notfound,forgot:/*#__PURE__*/React.createElement(Link,{to:\"/registration\"},\"Sign up for an account.\")});setUserID('');setEmail('');}else if(res.data.message===SEND_EMAIL_SUCCESS){alert('Your ID or Reset Password has been sent to the email you entered.');history.push('/login');}else if(res.data.message===SEND_EMAIL_FAIL){alert('Error has occured, Please try again.');history.push('/login');}case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}());case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function findID_Password(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(isLoggedIn){return history.push('/home');}},[]);var onChangeEmail=function onChangeEmail(e){var _email=e.target.value;setEmail(_email);};var onChangeUserID=function onChangeUserID(e){var _userID=e.target.value;setUserID(_userID);};return/*#__PURE__*/React.createElement(\"div\",{className:\"forgotIDPassword_whole\"},/*#__PURE__*/React.createElement(Tab.Container,{id:\"left-tabs-example\",defaultActiveKey:type},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:3},/*#__PURE__*/React.createElement(Nav,{variant:\"pills\",className:\"flex-column\"},/*#__PURE__*/React.createElement(Nav.Item,null,/*#__PURE__*/React.createElement(Nav.Link,{eventKey:\"id\"},\"Find ID\")),/*#__PURE__*/React.createElement(Nav.Item,null,/*#__PURE__*/React.createElement(Nav.Link,{eventKey:\"password\"},\"Reset Password\")))),/*#__PURE__*/React.createElement(Col,{sm:9},/*#__PURE__*/React.createElement(Tab.Content,null,/*#__PURE__*/React.createElement(Tab.Pane,{eventKey:\"id\"},/*#__PURE__*/React.createElement(Form,{onSubmit:findID_Password},/*#__PURE__*/React.createElement(\"h1\",null,\" Find User ID\"),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\",as:Col,md:{span:6,offset:3}},/*#__PURE__*/React.createElement(Form.Label,null,\"Email address\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"forgotIDPassword_input_email\",type:\"email\",placeholder:\"Enter email\",value:email,onChange:onChangeEmail,required:true}),/*#__PURE__*/React.createElement(Form.Control,{value:FIND_ID,NAME:\"forgotIDPassword_type\",hidden:true}),/*#__PURE__*/React.createElement(Form.Text,{className:\"text-muted\"},\"Type Email address you entered when you signed up.\"),showAlert?/*#__PURE__*/React.createElement(Alert,{variant:\"danger\",onClose:function onClose(){return setAlert(false);},dismissible:true},/*#__PURE__*/React.createElement(\"p\",null,alertMessage.body),/*#__PURE__*/React.createElement(\"p\",null,alertMessage.forgot)):null,loading?/*#__PURE__*/React.createElement(Button,{variant:\"primary\",type:\"submit\"},/*#__PURE__*/React.createElement(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"})):/*#__PURE__*/React.createElement(Button,{variant:\"primary\",type:\"submit\"},\"Submit\")))),/*#__PURE__*/React.createElement(Tab.Pane,{eventKey:\"password\"},/*#__PURE__*/React.createElement(Form,{onSubmit:findID_Password},/*#__PURE__*/React.createElement(\"h1\",null,\" Find Password\"),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\",as:Col,md:{span:6,offset:3}},/*#__PURE__*/React.createElement(Form.Label,null,\"User ID\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"forgotIDPassword_input_userID\",type:\"text\",placeholder:\"Enter userID\",value:userID,onChange:onChangeUserID,required:true}),/*#__PURE__*/React.createElement(Form.Text,{className:\"text-muted\"},\"Type User ID you entered when you signed up.\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Form.Label,null,\"Email address\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"forgotIDPassword_input_email\",type:\"email\",placeholder:\"Enter email\",value:email,onChange:onChangeEmail,required:true}),/*#__PURE__*/React.createElement(Form.Text,{className:\"text-muted\"},\"Type Email address you entered when you signed up.\"),/*#__PURE__*/React.createElement(Form.Control,{value:FIND_PASSWORD,NAME:\"forgotIDPassword_type\",hidden:true}),showAlert?/*#__PURE__*/React.createElement(Alert,{variant:\"danger\",onClose:function onClose(){return setAlert(false);},dismissible:true},/*#__PURE__*/React.createElement(\"p\",null,alertMessage.body),/*#__PURE__*/React.createElement(\"p\",null,alertMessage.forgot)):null,loading?/*#__PURE__*/React.createElement(Button,{variant:\"primary\",type:\"submit\"},/*#__PURE__*/React.createElement(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"})):/*#__PURE__*/React.createElement(Button,{variant:\"primary\",type:\"submit\"},\"Submit\")))))))));}export default ForgotIDPassword;","map":{"version":3,"sources":["C:/Users/834043/Desktop/study/Personal_Web_Site/client/src/Components/ForgotIDPassword.jsx"],"names":["React","useState","useRef","useEffect","Rab","Row","Col","Nav","Tab","Form","Button","Alert","Spinner","useDispatch","useSelector","useHistory","Link","ForgotService","FIND_ID","FIND_PASSWORD","NOT_FOUND_ID","NOT_FOUND_EMAIL","NOT_FOUND_ID_EMAIL","SEND_EMAIL_SUCCESS","SEND_EMAIL_FAIL","e_email_notfound","e_userID_notfound","e_userID_email_notfound","ForgotIDPassword","props","state","auth","isLoggedIn","user","match","params","type","setType","body","forgot","alertMessage","setAlertMessage","showAlert","setAlert","loading","setLoading","email","setEmail","userID","setUserID","history","findID_Password","e","preventDefault","_type","target","forgotIDPassword_type","value","console","log","forgot_info","find_ID_password","then","res","data","message","alert","push","onChangeEmail","_email","onChangeUserID","_userID","span","offset"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { Rab, Row, Col, Nav, Tab, Form, Button, Alert, Spinner } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory, Link } from 'react-router-dom';\r\nimport ForgotService from '../Services/Forgot.service';\r\nimport {\r\n\tFIND_ID,\r\n\tFIND_PASSWORD,\r\n\tNOT_FOUND_ID,\r\n\tNOT_FOUND_EMAIL,\r\n\tNOT_FOUND_ID_EMAIL,\r\n\tSEND_EMAIL_SUCCESS,\r\n\tSEND_EMAIL_FAIL\r\n} from \"./type\";\r\nimport {\r\n\te_email_notfound,\r\n\te_userID_notfound,\r\n\te_userID_email_notfound\r\n} from './message';\r\nimport '../css/ForgotIDPassword.css'\r\n\r\nfunction ForgotIDPassword(props) {\r\n\tconst { isLoggedIn, user } = useSelector(state => state.auth);\r\n\tconst [type, setType] = useState(props.match.params.type);\r\n\tconst [alertMessage, setAlertMessage] = useState({ body: null, forgot: null });\r\n\tconst [showAlert, setAlert] = useState(false);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [userID, setUserID] = useState('');\r\n\tlet history = useHistory();\r\n\tconst findID_Password = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetLoading(true);\r\n\t\tconst _type = e.target.forgotIDPassword_type.value;\r\n\t\tconsole.log(_type);\r\n\t\tconsole.log('userID: ', userID, 'email: ', email);\r\n\t\tlet forgot_info;\r\n\t\tif (_type === FIND_ID) {\r\n\t\t\tforgot_info = {\r\n\t\t\t\tuserID: null,\r\n\t\t\t\temail: email,\r\n\t\t\t\ttype: _type\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (_type === FIND_PASSWORD) {\r\n\t\t\tforgot_info = {\r\n\t\t\t\tuserID: userID,\r\n\t\t\t\temail: email,\r\n\t\t\t\ttype: _type\r\n\t\t\t}\r\n\t\t}\r\n\t\tawait ForgotService.find_ID_password(forgot_info)\r\n\t\t\t.then(async (res) => {\r\n\t\t\t\tconsole.log(res.data.message)\r\n\t\t\t\tif (res.data.message === NOT_FOUND_EMAIL) {\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\tsetAlert(true);\r\n\t\t\t\t\tsetAlertMessage({\r\n\t\t\t\t\t\tbody: e_email_notfound,\r\n\t\t\t\t\t\tforgot: <Link to='/registration'>Sign up for an account.</Link>\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetEmail('');\r\n\t\t\t\t}\r\n\t\t\t\t// else if (res.data.message === NOT_FOUND_ID) {\r\n\t\t\t\t// \tsetLoading(false);\r\n\t\t\t\t// \tsetAlert(true);\r\n\t\t\t\t// \tsetAlertMessage({\r\n\t\t\t\t// \t\tbody: e_userID_notfound,\r\n\t\t\t\t// \t\tforgot: <Link to='/registration'>Sign up for an account.</Link>\r\n\t\t\t\t// \t})\r\n\t\t\t\t// }\r\n\t\t\t\telse if (res.data.message === NOT_FOUND_ID_EMAIL) {\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\tsetAlert(true);\r\n\t\t\t\t\tsetAlertMessage({\r\n\t\t\t\t\t\tbody: e_userID_email_notfound,\r\n\t\t\t\t\t\tforgot: <Link to='/registration'>Sign up for an account.</Link>\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetUserID('');\r\n\t\t\t\t\tsetEmail('');\r\n\t\t\t\t}\r\n\t\t\t\telse if (res.data.message === SEND_EMAIL_SUCCESS) {\r\n\t\t\t\t\talert('Your ID or Reset Password has been sent to the email you entered.');\r\n\t\t\t\t\thistory.push('/login');\r\n\t\t\t\t}\r\n\t\t\t\telse if (res.data.message === SEND_EMAIL_FAIL) {\r\n\t\t\t\t\talert('Error has occured, Please try again.');\r\n\t\t\t\t\thistory.push('/login');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isLoggedIn) {\r\n\t\t\treturn history.push('/home');\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst onChangeEmail = (e) => {\r\n\t\tconst _email = e.target.value;\r\n\t\tsetEmail(_email);\r\n\t};\r\n\r\n\tconst onChangeUserID = (e) => {\r\n\t\tconst _userID = e.target.value;\r\n\t\tsetUserID(_userID);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"forgotIDPassword_whole\">\r\n\r\n\t\t\t<Tab.Container id=\"left-tabs-example\" defaultActiveKey={type}>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col sm={3}>\r\n\t\t\t\t\t\t<Nav variant=\"pills\" className=\"flex-column\">\r\n\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t<Nav.Link eventKey=\"id\">Find ID</Nav.Link>\r\n\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t<Nav.Link eventKey=\"password\">Reset Password</Nav.Link>\r\n\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col sm={9}>\r\n\t\t\t\t\t\t<Tab.Content>\r\n\t\t\t\t\t\t\t<Tab.Pane eventKey=\"id\">\r\n\t\t\t\t\t\t\t\t<Form onSubmit={findID_Password}>\r\n\t\t\t\t\t\t\t\t\t<h1> Find User ID</h1>\r\n\t\t\t\t\t\t\t\t\t<Form.Group controlId=\"formBasicEmail\" as={Col} md={{ span: 6, offset: 3 }}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Label>Email address</Form.Label>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tname='forgotIDPassword_input_email'\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter email\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={onChangeEmail}\r\n\t\t\t\t\t\t\t\t\t\t\trequired />\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control value={FIND_ID} NAME=\"forgotIDPassword_type\" hidden />\r\n\t\t\t\t\t\t\t\t\t\t<Form.Text className=\"text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t\tType Email address you entered when you signed up.\r\n    \t\t\t\t\t\t\t\t\t</Form.Text>\r\n\t\t\t\t\t\t\t\t\t\t{showAlert ?\r\n\t\t\t\t\t\t\t\t\t\t\t<Alert variant=\"danger\" onClose={() => setAlert(false)} dismissible>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{alertMessage.body}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{alertMessage.forgot}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t{loading ?\r\n\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"primary\" type=\"submit\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tas=\"span\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tanimation=\"border\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trole=\"status\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t: <Button variant=\"primary\" type=\"submit\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t</Tab.Pane>\r\n\t\t\t\t\t\t\t<Tab.Pane eventKey=\"password\">\r\n\t\t\t\t\t\t\t\t<Form onSubmit={findID_Password}>\r\n\t\t\t\t\t\t\t\t\t<h1> Find Password</h1>\r\n\t\t\t\t\t\t\t\t\t<Form.Group controlId=\"formBasicEmail\" as={Col} md={{ span: 6, offset: 3 }}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Label>User ID</Form.Label>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tname='forgotIDPassword_input_userID'\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter userID\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={userID}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={onChangeUserID}\r\n\t\t\t\t\t\t\t\t\t\t\trequired />\r\n\t\t\t\t\t\t\t\t\t\t<Form.Text className=\"text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t\tType User ID you entered when you signed up.\r\n    \t\t\t\t\t\t\t\t\t</Form.Text>\r\n\t\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t\t<Form.Label>Email address</Form.Label>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tname='forgotIDPassword_input_email'\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter email\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={onChangeEmail}\r\n\t\t\t\t\t\t\t\t\t\t\trequired />\r\n\t\t\t\t\t\t\t\t\t\t<Form.Text className=\"text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t\tType Email address you entered when you signed up.\r\n    \t\t\t\t\t\t\t\t\t</Form.Text>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control value={FIND_PASSWORD} NAME=\"forgotIDPassword_type\" hidden />\r\n\t\t\t\t\t\t\t\t\t\t{showAlert ?\r\n\t\t\t\t\t\t\t\t\t\t\t<Alert variant=\"danger\" onClose={() => setAlert(false)} dismissible>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{alertMessage.body}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{alertMessage.forgot}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t{loading ?\r\n\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"primary\" type=\"submit\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tas=\"span\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tanimation=\"border\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trole=\"status\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t: <Button variant=\"primary\" type=\"submit\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t</Tab.Pane>\r\n\t\t\t\t\t\t</Tab.Content>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Tab.Container>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ForgotIDPassword;"]},"metadata":{},"sourceType":"module"}