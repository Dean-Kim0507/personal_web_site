{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\client\\\\src\\\\Components\\\\BlogComponents\\\\BlogComments.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Button, Card, Accordion, InputGroup, FormControl, ListGroup, Modal } from 'react-bootstrap';\nimport { useHistory } from \"react-router-dom\";\nimport axios from 'axios';\n\nfunction BlogComments(props) {\n  let [comments, setComments] = useState([]); // let [comment_id, setComment_id] = useState(null);\n\n  let [seeMode, setSeeMode] = useState('See More');\n  let [seeMode_commentSubmitButton, setCommentButton] = useState(true);\n  let [comment_form_control_value, setComment_form_control_value] = useState('');\n  let [comment_create_value, setComment_create_value] = useState('');\n  let [commentMode, setCommentMode] = useState('innital render');\n  let [selectedId, setSelectedId] = useState(null);\n  let blog_id = props.id;\n  let key_blogComments = -1;\n  let history = useHistory();\n  let raw_comments; // let selectedId;\n  // const comment_id = props.comment_id;\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = id => {\n    setShow(true);\n    setSelectedId(id);\n    console.log(selectedId);\n  };\n\n  const sendComment = e => {\n    e.preventDefault();\n    setCommentMode('create');\n    setComment_create_value(e.target.comment_form_control.value);\n    setComment_form_control_value('');\n  };\n\n  const commentSubmitButton = e => {\n    let comment = e.target.value;\n    setComment_form_control_value(comment);\n    if (comment.length > 0) setCommentButton(false);else setCommentButton(true);\n  };\n\n  const delete_comment = e => {\n    e.preventDefault();\n    setCommentMode('delete');\n    handleClose();\n  };\n\n  const changeSeeMode = () => {\n    if (seeMode === 'See More') setSeeMode('See Less');else setSeeMode('See More');\n  };\n\n  const commentReverse = raw_comments => {\n    let temp_response_data = [];\n\n    if (raw_comments.length != 0) {\n      for (let i = raw_comments.length - 1; i >= 0; i--) {\n        temp_response_data.push(raw_comments[i]);\n      }\n    }\n\n    setComments(temp_response_data); // return temp_response_data;\n  };\n\n  useEffect(() => {\n    if (commentMode != '') {\n      console.log(selectedId);\n      let comment = {\n        id: selectedId,\n        body: comment_create_value,\n        blog_id: blog_id,\n        commentMode: commentMode\n      };\n      console.log('useEffect', comment);\n      axios.post(\"/blog/comments\", comment).then(response => {\n        raw_comments = response.data;\n      }).then(() => {\n        commentReverse(raw_comments);\n        setCommentMode('');\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, [commentMode]); // useEffect(() => {\n  // \tlet comment =\n  // \t{\n  // \t\tbody: comment_create_value,\n  // \t\tblog_id: blog_id,\n  // \t\tcommentMode: commentMode\n  // \t}\n  // \tconsole.log(comment);\n  // \t(\n  // \t\tasync () => {\n  // \t\t\tconst { data } = await axios.post(\"/blog/comments\", comment);\n  // \t\t\tconst a = commentReverse(data);\n  // \t\t\tsetComments(a);\n  // \t\t}\n  // \t)();\n  // }, [])\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    action: \"\",\n    method: \"post\",\n    onSubmit: sendComment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 4\n    }\n  }, comments.length === 0 ? /*#__PURE__*/React.createElement(InputGroup, {\n    className: \"comment_input_group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    placeholder: \"Comment\",\n    \"aria-label\": \"Comment\",\n    \"aria-describedby\": \"blog_comment\",\n    name: \"comment_form_control\",\n    onChange: commentSubmitButton,\n    value: comment_form_control_value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(InputGroup.Append, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-secondary\",\n    type: \"submit\",\n    disabled: seeMode_commentSubmitButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 8\n    }\n  }, \"Submit\"))) : /*#__PURE__*/React.createElement(Accordion, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 8\n    }\n  }, comments[0].blog_comment, comments.length === 0 ? /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 36\n    }\n  }, \"No comment\") : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    variant: \"light\",\n    size: \"sm\",\n    onClick: () => handleShow(comments[0].id),\n    className: \"blogComments_deleteButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 12\n    }\n  }, \"Delete\"), /*#__PURE__*/React.createElement(Accordion.Toggle, {\n    as: Button,\n    variant: \"link\",\n    eventKey: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"small\", {\n    onClick: changeSeeMode,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, seeMode)))), /*#__PURE__*/React.createElement(Accordion.Collapse, {\n    eventKey: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, // To show the first comment at the top (first comment is substracted)\n  comments.slice(1, comments.length).map((data, i) => {\n    key_blogComments = key_blogComments + 1;\n    return /*#__PURE__*/React.createElement(ListGroup.Item, {\n      key: data.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, data.blog_comment, /*#__PURE__*/React.createElement(Button, {\n      variant: \"light\",\n      size: \"sm\",\n      onClick: () => handleShow(data.id),\n      className: \"blogComments_deleteButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    }, \"Delete\"));\n  }))), /*#__PURE__*/React.createElement(Modal, {\n    show: show,\n    onHide: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 10\n    }\n  }, \"Delete it ?\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }, \" Delete this comment, permanently ?\"), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 10\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: delete_comment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 10\n    }\n  }, \"Delete\"))), /*#__PURE__*/React.createElement(InputGroup, {\n    className: \"comment_input_group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    placeholder: \"Comment\",\n    \"aria-label\": \"Comment\",\n    \"aria-describedby\": \"blog_comment\",\n    name: \"comment_form_control\",\n    onChange: commentSubmitButton,\n    value: comment_form_control_value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(InputGroup.Append, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-secondary\",\n    type: \"submit\",\n    disabled: seeMode_commentSubmitButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 10\n    }\n  }, \"Submit\")))))));\n}\n\nexport default BlogComments;","map":{"version":3,"sources":["C:/Users/834043/Desktop/study/Personal_Web_Site/client/src/Components/BlogComponents/BlogComments.js"],"names":["React","useState","useEffect","Button","Card","Accordion","InputGroup","FormControl","ListGroup","Modal","useHistory","axios","BlogComments","props","comments","setComments","seeMode","setSeeMode","seeMode_commentSubmitButton","setCommentButton","comment_form_control_value","setComment_form_control_value","comment_create_value","setComment_create_value","commentMode","setCommentMode","selectedId","setSelectedId","blog_id","id","key_blogComments","history","raw_comments","show","setShow","handleClose","handleShow","console","log","sendComment","e","preventDefault","target","comment_form_control","value","commentSubmitButton","comment","length","delete_comment","changeSeeMode","commentReverse","temp_response_data","i","push","body","post","then","response","data","catch","error","blog_comment","slice","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Button, Card, Accordion, InputGroup, FormControl, ListGroup, Modal } from 'react-bootstrap';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from 'axios';\r\n\r\nfunction BlogComments(props) {\r\n\r\n\tlet [comments, setComments] = useState([]);\r\n\t// let [comment_id, setComment_id] = useState(null);\r\n\tlet [seeMode, setSeeMode] = useState('See More');\r\n\tlet [seeMode_commentSubmitButton, setCommentButton] = useState(true);\r\n\tlet [comment_form_control_value, setComment_form_control_value] = useState('');\r\n\tlet [comment_create_value, setComment_create_value] = useState('');\r\n\tlet [commentMode, setCommentMode] = useState('innital render');\r\n\tlet [selectedId, setSelectedId] = useState(null);\r\n\tlet blog_id = props.id;\r\n\tlet key_blogComments = -1;\r\n\tlet history = useHistory();\r\n\tlet raw_comments;\r\n\t// let selectedId;\r\n\r\n\t// const comment_id = props.comment_id;\r\n\tconst [show, setShow] = useState(false);\r\n\tconst handleClose = () => setShow(false);\r\n\tconst handleShow = (id) => {\r\n\t\tsetShow(true);\r\n\t\tsetSelectedId(id);\r\n\t\tconsole.log(selectedId)\r\n\t}\r\n\r\n\tconst sendComment = (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetCommentMode('create');\r\n\t\tsetComment_create_value(e.target.comment_form_control.value);\r\n\t\tsetComment_form_control_value('');\r\n\t}\r\n\r\n\tconst commentSubmitButton = (e) => {\r\n\t\tlet comment = e.target.value;\r\n\t\tsetComment_form_control_value(comment);\r\n\t\tif (comment.length > 0) setCommentButton(false);\r\n\t\telse setCommentButton(true);\r\n\t}\r\n\r\n\tconst delete_comment = (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetCommentMode('delete')\r\n\t\thandleClose();\r\n\t}\r\n\r\n\tconst changeSeeMode = () => {\r\n\t\tif (seeMode === 'See More') setSeeMode('See Less');\r\n\t\telse setSeeMode('See More');\r\n\t}\r\n\r\n\tconst commentReverse = (raw_comments) => {\r\n\t\tlet temp_response_data = [];\r\n\t\tif (raw_comments.length != 0) {\r\n\t\t\tfor (let i = raw_comments.length - 1; i >= 0; i--) {\r\n\t\t\t\ttemp_response_data.push(raw_comments[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetComments(temp_response_data);\r\n\t\t// return temp_response_data;\r\n\t}\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (commentMode != '') {\r\n\t\t\t\tconsole.log(selectedId)\r\n\t\t\t\tlet comment =\r\n\t\t\t\t{\r\n\t\t\t\t\tid: selectedId,\r\n\t\t\t\t\tbody: comment_create_value,\r\n\t\t\t\t\tblog_id: blog_id,\r\n\t\t\t\t\tcommentMode: commentMode\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log('useEffect', comment);\r\n\t\t\t\taxios.post(\"/blog/comments\", comment)\r\n\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\traw_comments = response.data;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tcommentReverse(raw_comments);\r\n\t\t\t\t\t\tsetCommentMode('');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function (error) {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, [commentMode]);\r\n\r\n\t// useEffect(() => {\r\n\t// \tlet comment =\r\n\t// \t{\r\n\t// \t\tbody: comment_create_value,\r\n\t// \t\tblog_id: blog_id,\r\n\t// \t\tcommentMode: commentMode\r\n\t// \t}\r\n\t// \tconsole.log(comment);\r\n\t// \t(\r\n\t// \t\tasync () => {\r\n\t// \t\t\tconst { data } = await axios.post(\"/blog/comments\", comment);\r\n\t// \t\t\tconst a = commentReverse(data);\r\n\t// \t\t\tsetComments(a);\r\n\t// \t\t}\r\n\t// \t)();\r\n\t// }, [])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<form action='' method=\"post\" onSubmit={sendComment}>\r\n\t\t\t\t{comments.length === 0 ?\r\n\t\t\t\t\t<InputGroup className=\"comment_input_group\">\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tplaceholder=\"Comment\"\r\n\t\t\t\t\t\t\taria-label=\"Comment\"\r\n\t\t\t\t\t\t\taria-describedby=\"blog_comment\"\r\n\t\t\t\t\t\t\tname=\"comment_form_control\"\r\n\t\t\t\t\t\t\tonChange={commentSubmitButton}\r\n\t\t\t\t\t\t\tvalue={comment_form_control_value}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<InputGroup.Append>\r\n\t\t\t\t\t\t\t<Button variant=\"outline-secondary\" type=\"submit\" disabled={seeMode_commentSubmitButton}>Submit</Button>\r\n\t\t\t\t\t\t</InputGroup.Append>\r\n\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t< Accordion >\r\n\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t<Card.Header>\r\n\t\t\t\t\t\t\t\t{comments[0].blog_comment}\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t(comments.length === 0) ? <small>No comment</small> :\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" size=\"sm\" onClick={() => handleShow(comments[0].id)} className=\"blogComments_deleteButton\">Delete</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t<Accordion.Toggle as={Button} variant=\"link\" eventKey=\"0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<small onClick={changeSeeMode}>{seeMode}</small>\r\n\t\t\t\t\t\t\t\t\t\t\t</Accordion.Toggle>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</Card.Header>\r\n\t\t\t\t\t\t\t<Accordion.Collapse eventKey=\"0\">\r\n\t\t\t\t\t\t\t\t<ListGroup variant=\"flush\">\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t// To show the first comment at the top (first comment is substracted)\r\n\t\t\t\t\t\t\t\t\t\tcomments.slice(1, comments.length).map((data, i) => {\r\n\t\t\t\t\t\t\t\t\t\t\tkey_blogComments = key_blogComments + 1;\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ListGroup.Item key={data.id}>{data.blog_comment}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" size=\"sm\" onClick={() => handleShow(data.id)} className=\"blogComments_deleteButton\">Delete</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t\t\t</Accordion.Collapse>\r\n\t\t\t\t\t\t\t<Modal show={show} onHide={handleClose}>\r\n\t\t\t\t\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t\t\t\t\t<Modal.Title>Delete it ?</Modal.Title>\r\n\t\t\t\t\t\t\t\t</Modal.Header>\r\n\t\t\t\t\t\t\t\t<Modal.Body> Delete this comment, permanently ?</Modal.Body>\r\n\t\t\t\t\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"secondary\" onClick={handleClose}>\r\n\t\t\t\t\t\t\t\t\t\tCancel\r\n          \t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"primary\" onClick={delete_comment}>\r\n\t\t\t\t\t\t\t\t\t\tDelete\r\n          \t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Modal.Footer>\r\n\t\t\t\t\t\t\t</Modal>\r\n\r\n\t\t\t\t\t\t\t<InputGroup className=\"comment_input_group\">\r\n\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Comment\"\r\n\t\t\t\t\t\t\t\t\taria-label=\"Comment\"\r\n\t\t\t\t\t\t\t\t\taria-describedby=\"blog_comment\"\r\n\t\t\t\t\t\t\t\t\tname=\"comment_form_control\"\r\n\t\t\t\t\t\t\t\t\tonChange={commentSubmitButton}\r\n\t\t\t\t\t\t\t\t\tvalue={comment_form_control_value}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<InputGroup.Append>\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"outline-secondary\" type=\"submit\" disabled={seeMode_commentSubmitButton}>Submit</Button>\r\n\t\t\t\t\t\t\t\t</InputGroup.Append>\r\n\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Accordion>\r\n\t\t\t\t}\r\n\t\t\t</form>\r\n\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default BlogComments;"]},"metadata":{},"sourceType":"module"}