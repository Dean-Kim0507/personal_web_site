{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from\"react\";import{Button,Form,Col,Figure}from'react-bootstrap';import{useHistory}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{register}from\"../Actions/auth\";import ImageUploader from'react-images-upload';import'../css/Registration.css';import{d_userMessage,d_emailMessage,v_passwordMessage,v_confirmPasswordMessage,v_idMessage,v_emailMessage,v_fNMessage,v_lNMessage}from\"./message\";function Register(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),validated=_useState2[0],setValidated=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userID=_useState4[0],setUserId=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),confirmPassword_invalid=_useState10[0],setConfirmPassword_invalid=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),firstName=_useState12[0],setFirstName=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),lastName=_useState14[0],setLastName=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),email=_useState16[0],setEmail=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),userIdFeedBack=_useState18[0],setUserIdFeedBack=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),emailFeedBack=_useState20[0],setEmailFeedBack=_useState20[1];var _useState21=useState(),_useState22=_slicedToArray(_useState21,2),userIdInvalid=_useState22[0],setUserIdInvalid=_useState22[1];var _useState23=useState(),_useState24=_slicedToArray(_useState23,2),emailInvalid=_useState24[0],setEmailInvalid=_useState24[1];var _useState25=useState(),_useState26=_slicedToArray(_useState25,2),passwordInvalid=_useState26[0],setPasswordInvalid=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),pictures=_useState28[0],setPictures=_useState28[1];var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.message;}),message=_useSelector.message;var IMG_WIDTH=171;var IMG_LENGTH=180;var _useState29=useState(null),_useState30=_slicedToArray(_useState29,2),profileImageURL=_useState30[0],setProfileImageURL=_useState30[1];var _userID;var _password;var _confirm_password;var history=useHistory();var handleSubmit=function handleSubmit(event){var form=event.currentTarget;if(form.checkValidity()===false||userIdInvalid){event.preventDefault();event.stopPropagation();setValidated(true);}else{event.preventDefault();var user_data={userID:userID,password:password,firstName:firstName,lastName:lastName,email:email};dispatch(register(user_data,pictures));}};useEffect(function(){if(message==='Registration success'){alert(\"Signing Up Success! Please Login Again\");history.push('/login');}else{// console.log(response.data);\nif(message=='userID, email duplication'){setUserIdInvalid(true);setUserIdFeedBack(d_userMessage);setEmailInvalid(true);setEmailFeedBack(d_emailMessage);}else if(message=='userID duplication'){setUserIdInvalid(true);setUserIdFeedBack(d_userMessage);setEmailInvalid(false);}else if(message=='email duplication'){setEmailInvalid(true);setEmailFeedBack(d_emailMessage);setUserIdInvalid(false);}else{console.log('error: ',message);}}});var uploadSingleFile=function uploadSingleFile(picture){setProfileImageURL(URL.createObjectURL(picture[0]));setPictures(picture[0]);};var onChangeUserID=function onChangeUserID(e){var regExp=/^[A-Za-z0-9+]*$/;_userID=e.target.value;if(_userID===undefined||_userID.length<8||_userID.length>20||!regExp.test(_userID)){setUserIdInvalid(true);setUserIdFeedBack(v_idMessage);}else{setUserIdInvalid(false);setUserId(_userID);}};//validating password, password must be between 8 and 20 letter.\nvar onChangePassword=function onChangePassword(e){_password=e.target.value;if(_password===undefined||_password.length<8||_password.length>20){setPasswordInvalid(true);setPassword(_password);}else if(confirmPassword!=null&&_password!=confirmPassword){setPasswordInvalid(false);setConfirmPassword_invalid(true);setPassword(_password);}else if(confirmPassword!=null&&_password===confirmPassword){setPasswordInvalid(false);setConfirmPassword_invalid(false);setPassword(_password);}else{setPasswordInvalid(function(){return false;});setPassword(_password);if(_password!=confirmPassword){setConfirmPassword_invalid(true);}}};//validating confirm password, confirm password must be between 8 and 20 letter and the same as password.\nvar onChangeConfirmPassword=function onChangeConfirmPassword(e){_confirm_password=e.target.value;if(_confirm_password===undefined||_confirm_password.length<8||_confirm_password.length>20){setConfirmPassword_invalid(true);setConfirmPassword(_confirm_password);}else if(password!=null&&_confirm_password!=password){setConfirmPassword_invalid(true);setConfirmPassword(_confirm_password);}else if(password!=null&&_confirm_password===password){setConfirmPassword_invalid(false);setConfirmPassword(_confirm_password);}else{setConfirmPassword_invalid(true);setConfirmPassword(_confirm_password);}};//First name, last name, email are required\nvar onChangeFirstName=function onChangeFirstName(e){var first_Name=e.target.value;setFirstName(first_Name);};var onChangeLastName=function onChangeLastName(e){var last_Name=e.target.value;setLastName(last_Name);};var onChangeEmail=function onChangeEmail(e){var e_mail=e.target.value;setEmail(e_mail);var regExp=/^[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*\\.[a-zA-Z]{2,3}$/i;if(!regExp.test(e_mail)){setEmailInvalid(true);setEmailFeedBack(v_emailMessage);}else{setEmailInvalid(false);setEmail(e_mail);}};return/*#__PURE__*/React.createElement(Form,{noValidate:true,validated:validated,onSubmit:handleSubmit,className:\"registration_form\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Create a New Account\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Col,{md:{offset:4}},/*#__PURE__*/React.createElement(Form.Group,{as:Col,md:\"4\",className:\"registration_form_group\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"registration_form_label\"},\"User ID\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"User ID\",onChange:onChangeUserID,isInvalid:userIdInvalid,minLength:\"8\",maxLength:\"20\",required:true}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},userIdFeedBack)),/*#__PURE__*/React.createElement(Form.Group,{as:Col,md:\"4\",className:\"registration_form_group\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"registration_form_label\"},\"Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Password\",onChange:onChangePassword,isInvalid:passwordInvalid,minLength:\"8\",maxLength:\"20\",required:true}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},v_passwordMessage)),/*#__PURE__*/React.createElement(Form.Group,{as:Col,md:\"4\",className:\"registration_form_group\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"registration_form_label\"},\"Confirm Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Confirm Password\",required:true,isInvalid:confirmPassword_invalid,onChange:onChangeConfirmPassword,minLength:\"8\",maxLength:\"20\"}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},v_confirmPasswordMessage)),/*#__PURE__*/React.createElement(Form.Group,{as:Col,md:\"4\",className:\"registration_form_group\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"registration_form_label\"},\"First name\"),/*#__PURE__*/React.createElement(Form.Control,{required:true,type:\"text\",placeholder:\"First name\",onChange:onChangeFirstName,maxLength:\"100\"}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},v_fNMessage)),/*#__PURE__*/React.createElement(Form.Group,{as:Col,md:\"4\",className:\"registration_form_group\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"registration_form_label\"},\"Last name\"),/*#__PURE__*/React.createElement(Form.Control,{required:true,type:\"text\",placeholder:\"Last name\",onChange:onChangeLastName,maxLength:\"100\"}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},v_lNMessage)),/*#__PURE__*/React.createElement(Form.Group,{as:Col,md:\"4\",className:\"registration_form_group\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"registration_form_label\"},\"Email address\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",placeholder:\"Email address\",onChange:onChangeEmail,isInvalid:emailInvalid,maxLength:\"200\",required:true}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},emailFeedBack))),/*#__PURE__*/React.createElement(Figure,{className:\"registration_figure\"},profileImageURL?/*#__PURE__*/React.createElement(Figure.Image,{width:IMG_WIDTH,height:IMG_LENGTH,alt:\"171x180\",src:profileImageURL,roundedCircle:true}):/*#__PURE__*/React.createElement(Figure.Image,{width:IMG_WIDTH,height:IMG_LENGTH,alt:\"171x180\",src:\"./uploadImages/icon/img_user.jpg\",roundedCircle:true})),/*#__PURE__*/React.createElement(ImageUploader,{buttonText:\"Choose Profile Image\",onChange:uploadSingleFile,imgExtension:['.jpg','.gif','.png','.gif'],maxFileSize:5242880,singleImage:true,withIcon:false,withPreview:false}),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(Button,{className:\"registration_join_button\",type:\"submit\"},\"Sign Up\")));}export default Register;","map":{"version":3,"sources":["C:/Users/834043/Desktop/study/Personal_Web_Site/client/src/Components/Registration.jsx"],"names":["React","useState","useEffect","useCallback","Button","Form","Col","Figure","useHistory","useDispatch","useSelector","register","ImageUploader","d_userMessage","d_emailMessage","v_passwordMessage","v_confirmPasswordMessage","v_idMessage","v_emailMessage","v_fNMessage","v_lNMessage","Register","props","validated","setValidated","userID","setUserId","password","setPassword","confirmPassword","setConfirmPassword","confirmPassword_invalid","setConfirmPassword_invalid","firstName","setFirstName","lastName","setLastName","email","setEmail","userIdFeedBack","setUserIdFeedBack","emailFeedBack","setEmailFeedBack","userIdInvalid","setUserIdInvalid","emailInvalid","setEmailInvalid","passwordInvalid","setPasswordInvalid","pictures","setPictures","dispatch","state","message","IMG_WIDTH","IMG_LENGTH","profileImageURL","setProfileImageURL","_userID","_password","_confirm_password","history","handleSubmit","event","form","currentTarget","checkValidity","preventDefault","stopPropagation","user_data","alert","push","console","log","uploadSingleFile","picture","URL","createObjectURL","onChangeUserID","e","regExp","target","value","undefined","length","test","onChangePassword","onChangeConfirmPassword","onChangeFirstName","first_Name","onChangeLastName","last_Name","onChangeEmail","e_mail","offset"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { Button, Form, Col, Figure } from 'react-bootstrap';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { register } from \"../Actions/auth\";\r\nimport ImageUploader from 'react-images-upload';\r\nimport '../css/Registration.css';\r\nimport {\r\n\td_userMessage,\r\n\td_emailMessage,\r\n\tv_passwordMessage,\r\n\tv_confirmPasswordMessage,\r\n\tv_idMessage,\r\n\tv_emailMessage,\r\n\tv_fNMessage,\r\n\tv_lNMessage\r\n} from \"./message\";\r\n\r\nfunction Register(props) {\r\n\tconst [validated, setValidated] = useState(false);\r\n\tconst [userID, setUserId] = useState(null);\r\n\tconst [password, setPassword] = useState(null);\r\n\tconst [confirmPassword, setConfirmPassword] = useState(null);\r\n\tconst [confirmPassword_invalid, setConfirmPassword_invalid] = useState();\r\n\tconst [firstName, setFirstName] = useState(null);\r\n\tconst [lastName, setLastName] = useState(null);\r\n\tconst [email, setEmail] = useState(null);\r\n\tconst [userIdFeedBack, setUserIdFeedBack] = useState(null);\r\n\tconst [emailFeedBack, setEmailFeedBack] = useState(null);\r\n\tconst [userIdInvalid, setUserIdInvalid] = useState();\r\n\tconst [emailInvalid, setEmailInvalid] = useState();\r\n\tconst [passwordInvalid, setPasswordInvalid] = useState();\r\n\tconst [pictures, setPictures] = useState(null);\r\n\tconst dispatch = useDispatch();\r\n\tconst { message } = useSelector(state => state.message);\r\n\tconst IMG_WIDTH = 171;\r\n\tconst IMG_LENGTH = 180;\r\n\r\n\tlet [profileImageURL, setProfileImageURL] = useState(null);\r\n\tlet _userID;\r\n\tlet _password;\r\n\tlet _confirm_password;\r\n\tlet history = useHistory();\r\n\r\n\tconst handleSubmit = (event) => {\r\n\t\tconst form = event.currentTarget;\r\n\t\tif (form.checkValidity() === false || userIdInvalid) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tsetValidated(true);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tconst user_data = {\r\n\t\t\t\tuserID: userID,\r\n\t\t\t\tpassword: password,\r\n\t\t\t\tfirstName: firstName,\r\n\t\t\t\tlastName: lastName,\r\n\t\t\t\temail: email\r\n\t\t\t}\r\n\t\t\tdispatch(register(user_data, pictures));\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tif (message === 'Registration success') {\r\n\t\t\talert(\"Signing Up Success! Please Login Again\");\r\n\t\t\thistory.push('/login');\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// console.log(response.data);\r\n\t\t\tif (message == 'userID, email duplication') {\r\n\t\t\t\tsetUserIdInvalid(true);\r\n\t\t\t\tsetUserIdFeedBack(d_userMessage);\r\n\t\t\t\tsetEmailInvalid(true);\r\n\t\t\t\tsetEmailFeedBack(d_emailMessage);\r\n\t\t\t}\r\n\t\t\telse if (message == 'userID duplication') {\r\n\t\t\t\tsetUserIdInvalid(true);\r\n\t\t\t\tsetUserIdFeedBack(d_userMessage);\r\n\t\t\t\tsetEmailInvalid(false);\r\n\t\t\t}\r\n\t\t\telse if (message == 'email duplication') {\r\n\t\t\t\tsetEmailInvalid(true);\r\n\t\t\t\tsetEmailFeedBack(d_emailMessage);\r\n\t\t\t\tsetUserIdInvalid(false);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.log('error: ', message)\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\tconst uploadSingleFile = picture => {\r\n\t\tsetProfileImageURL(URL.createObjectURL(picture[0]));\r\n\t\tsetPictures(picture[0]);\r\n\t}\r\n\r\n\tconst onChangeUserID = (e) => {\r\n\t\tconst regExp = /^[A-Za-z0-9+]*$/;\r\n\t\t_userID = e.target.value;\r\n\t\tif (_userID === undefined || _userID.length < 8 || _userID.length > 20 || !regExp.test(_userID)) {\r\n\t\t\tsetUserIdInvalid(true);\r\n\t\t\tsetUserIdFeedBack(v_idMessage);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetUserIdInvalid(false);\r\n\t\t\tsetUserId(_userID);\r\n\t\t}\r\n\t};\r\n\r\n\t//validating password, password must be between 8 and 20 letter.\r\n\tconst onChangePassword = (e) => {\r\n\t\t_password = e.target.value;\r\n\t\tif (_password === undefined || _password.length < 8 || _password.length > 20) {\r\n\t\t\tsetPasswordInvalid(true);\r\n\t\t\tsetPassword(_password);\r\n\t\t}\r\n\t\telse if (confirmPassword != null && _password != confirmPassword) {\r\n\t\t\tsetPasswordInvalid(false);\r\n\t\t\tsetConfirmPassword_invalid(true);\r\n\t\t\tsetPassword(_password);\r\n\t\t}\r\n\t\telse if (confirmPassword != null && _password === confirmPassword) {\r\n\t\t\tsetPasswordInvalid(false);\r\n\t\t\tsetConfirmPassword_invalid(false);\r\n\t\t\tsetPassword(_password);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetPasswordInvalid(() => false);\r\n\t\t\tsetPassword(_password);\r\n\t\t\tif (_password != confirmPassword) {\r\n\t\t\t\tsetConfirmPassword_invalid(true);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t//validating confirm password, confirm password must be between 8 and 20 letter and the same as password.\r\n\tconst onChangeConfirmPassword = (e) => {\r\n\r\n\t\t_confirm_password = e.target.value;\r\n\t\tif (_confirm_password === undefined || _confirm_password.length < 8 || _confirm_password.length > 20) {\r\n\t\t\tsetConfirmPassword_invalid(true);\r\n\t\t\tsetConfirmPassword(_confirm_password);\r\n\t\t}\r\n\t\telse if (password != null && _confirm_password != password) {\r\n\t\t\tsetConfirmPassword_invalid(true);\r\n\t\t\tsetConfirmPassword(_confirm_password);\r\n\t\t}\r\n\t\telse if (password != null && _confirm_password === password) {\r\n\t\t\tsetConfirmPassword_invalid(false);\r\n\t\t\tsetConfirmPassword(_confirm_password);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetConfirmPassword_invalid(true);\r\n\t\t\tsetConfirmPassword(_confirm_password);\r\n\t\t}\r\n\t};\r\n\t//First name, last name, email are required\r\n\tconst onChangeFirstName = (e) => {\r\n\t\tconst first_Name = e.target.value;\r\n\t\tsetFirstName(first_Name);\r\n\t};\r\n\r\n\tconst onChangeLastName = (e) => {\r\n\t\tconst last_Name = e.target.value;\r\n\t\tsetLastName(last_Name);\r\n\t};\r\n\r\n\tconst onChangeEmail = (e) => {\r\n\r\n\t\tconst e_mail = e.target.value;\r\n\t\tsetEmail(e_mail);\r\n\t\tconst regExp = /^[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*\\.[a-zA-Z]{2,3}$/i;\r\n\t\tif (!regExp.test(e_mail)) {\r\n\t\t\tsetEmailInvalid(true);\r\n\t\t\tsetEmailFeedBack(v_emailMessage);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetEmailInvalid(false);\r\n\t\t\tsetEmail(e_mail);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t< Form\r\n\t\t\tnoValidate validated={validated}\r\n\t\t\tonSubmit={handleSubmit}\r\n\t\t\tclassName=\"registration_form\"\r\n\t\t>\r\n\t\t\t<h1>Create a New Account</h1>\r\n\t\t\t<hr />\r\n\t\t\t<Col md={{ offset: 4 }}>\r\n\t\t\t\t<Form.Group as={Col} md=\"4\" className=\"registration_form_group\">\r\n\t\t\t\t\t<Form.Label className=\"registration_form_label\">User ID</Form.Label>\r\n\t\t\t\t\t<Form.Control type=\"text\" placeholder=\"User ID\" onChange={onChangeUserID} isInvalid={userIdInvalid} minLength=\"8\" maxLength=\"20\" required />\r\n\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t{userIdFeedBack}\r\n\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group as={Col} md=\"4\" className=\"registration_form_group\">\r\n\t\t\t\t\t<Form.Label className=\"registration_form_label\">Password</Form.Label>\r\n\t\t\t\t\t<Form.Control type=\"password\" placeholder=\"Password\" onChange={onChangePassword} isInvalid={passwordInvalid} minLength=\"8\" maxLength=\"20\" required />\r\n\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t{v_passwordMessage}\r\n\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group as={Col} md=\"4\" className=\"registration_form_group\">\r\n\t\t\t\t\t<Form.Label className=\"registration_form_label\">Confirm Password</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tplaceholder=\"Confirm Password\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tisInvalid={confirmPassword_invalid}\r\n\t\t\t\t\t\tonChange={onChangeConfirmPassword}\r\n\t\t\t\t\t\tminLength=\"8\" maxLength=\"20\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t{v_confirmPasswordMessage}\r\n\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group as={Col} md=\"4\" className=\"registration_form_group\">\r\n\t\t\t\t\t<Form.Label className=\"registration_form_label\">First name</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"First name\"\r\n\t\t\t\t\t\tonChange={onChangeFirstName}\r\n\t\t\t\t\t\tmaxLength=\"100\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t{v_fNMessage}\r\n\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group as={Col} md=\"4\" className=\"registration_form_group\">\r\n\t\t\t\t\t<Form.Label className=\"registration_form_label\">Last name</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Last name\"\r\n\t\t\t\t\t\tonChange={onChangeLastName}\r\n\t\t\t\t\t\tmaxLength=\"100\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t{v_lNMessage}\r\n\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group as={Col} md=\"4\" className=\"registration_form_group\">\r\n\t\t\t\t\t<Form.Label className=\"registration_form_label\">Email address</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tplaceholder=\"Email address\"\r\n\t\t\t\t\t\tonChange={onChangeEmail}\r\n\t\t\t\t\t\tisInvalid={emailInvalid}\r\n\t\t\t\t\t\tmaxLength=\"200\"\r\n\t\t\t\t\t\trequired />\r\n\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t{emailFeedBack}\r\n\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t</Col>\r\n\r\n\t\t\t<Figure className=\"registration_figure\">\r\n\t\t\t\t{profileImageURL ?\r\n\t\t\t\t\t<Figure.Image\r\n\t\t\t\t\t\twidth={IMG_WIDTH}\r\n\t\t\t\t\t\theight={IMG_LENGTH}\r\n\t\t\t\t\t\talt=\"171x180\"\r\n\t\t\t\t\t\tsrc={profileImageURL}\r\n\t\t\t\t\t\troundedCircle\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<Figure.Image\r\n\t\t\t\t\t\twidth={IMG_WIDTH}\r\n\t\t\t\t\t\theight={IMG_LENGTH}\r\n\t\t\t\t\t\talt=\"171x180\"\r\n\t\t\t\t\t\tsrc=\"./uploadImages/icon/img_user.jpg\"\r\n\t\t\t\t\t\troundedCircle\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t</Figure>\r\n\r\n\t\t\t<ImageUploader\r\n\t\t\t\tbuttonText='Choose Profile Image'\r\n\t\t\t\tonChange={uploadSingleFile}\r\n\t\t\t\timgExtension={['.jpg', '.gif', '.png', '.gif']}\r\n\t\t\t\tmaxFileSize={5242880}\r\n\t\t\t\tsingleImage={true}\r\n\t\t\t\twithIcon={false}\r\n\t\t\t\twithPreview={false}\r\n\t\t\t/>\r\n\t\t\t<p>\r\n\t\t\t\t<Button className=\"registration_join_button\" type=\"submit\">Sign Up</Button>\r\n\t\t\t</p>\r\n\t\t</Form >\r\n\r\n\t);\r\n}\r\n\r\nexport default Register;"]},"metadata":{},"sourceType":"module"}