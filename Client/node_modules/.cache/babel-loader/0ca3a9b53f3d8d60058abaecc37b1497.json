{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\834043\\\\Desktop\\\\study\\\\Personal_Web_Site\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{REGISTER_SUCCESS,REGISTER_FAIL,LOGIN_SUCCESS,LOGIN_FAIL,LOGOUT,SET_MESSAGE,UPDATE_SUCCESS,UPDATE_FAIL,DELETE_ACCOUNT,DELETE_ACCOUNT_SUCCESS,UNAUTHORIZED,NO_TOKEN_PROVIDED}from\"./types\";import{v_session_expired}from\"../Components/message\";import AuthService from\"../Services/Auth.service\";export var register=function register(user_data,imgFile){return function(dispatch){return AuthService.register(user_data,imgFile).then(function(response){dispatch({type:REGISTER_SUCCESS});dispatch({type:SET_MESSAGE,payload:response.data.message});console.log('actions: ',response.data.message);return Promise.resolve();},function(error){var message=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();dispatch({type:REGISTER_FAIL});dispatch({type:SET_MESSAGE,payload:message});return Promise.reject();});};};export var login=function login(userID,password){return function(dispatch){return AuthService.login(userID,password).then(function(data){console.log(data.profileImg);dispatch({type:LOGIN_SUCCESS,payload:{user:data}});dispatch({type:SET_MESSAGE,payload:data.message});return Promise.resolve();},function(error){var message=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();dispatch({type:LOGIN_FAIL});dispatch({type:SET_MESSAGE,payload:message});return Promise.reject();});};};export var logout=function logout(){return function(dispatch){AuthService.logout();dispatch({type:LOGOUT});};};export var userUpdate=function userUpdate(user_data,imgFile){return function(dispatch){return AuthService.userUpdate(user_data,imgFile).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(data);dispatch({type:UPDATE_SUCCESS,payload:{user:data}});dispatch({type:SET_MESSAGE,payload:data.message});return _context.abrupt(\"return\",Promise.resolve());case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),function(error){var message=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();console.log(message);// // if (message == UNAUTHORIZED || message == NO_TOKEN_PROVIDED) {\n// \tdispatch({\n// \t\ttype: LOGIN_INVALID,\n// \t});\n// \tdispatch({\n// \t\ttype: SET_MESSAGE,\n// \t\tpayload: message,\n// \t});\n// \tlocalStorage.removeItem(\"user\");\n// }\n// else {\ndispatch({type:UPDATE_FAIL});dispatch({type:SET_MESSAGE,payload:message});// }\nreturn Promise.reject();});};};export var loginValid=function loginValid(){return function(dispatch){return AuthService.loginValid().then(function(data){dispatch({type:SET_MESSAGE,payload:data.message});return Promise.resolve();}).catch(function(error){alert(v_session_expired);dispatch(logout());var message=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();dispatch({type:LOGOUT});dispatch({type:SET_MESSAGE,payload:message});return Promise.reject();});// .then(\n// \t(data) => {\n// \t\tdispatch({\n// \t\t\ttype: LOGIN_SUCCESS,\n// \t\t\tpayload: { user: data }\n// \t\t});\n// \t\tdispatch({\n// \t\t\ttype: SET_MESSAGE,\n// \t\t\tpayload: data.message,\n// \t\t});\n// \t\treturn Promise.resolve();\n// \t\t// }\n// \t},\n// \t(error) => {\n// \t\tconst message =\n// \t\t\t(error.response &&\n// \t\t\t\terror.response.data &&\n// \t\t\t\terror.response.data.message) ||\n// \t\t\terror.message ||\n// \t\t\terror.toString();\n// \t\tconsole.log(message);\n// // if (message == UNAUTHORIZED || message == NO_TOKEN_PROVIDED) {\n// \tdispatch({\n// \t\ttype: LOGIN_INVALID,\n// \t});\n// \tdispatch({\n// \t\ttype: SET_MESSAGE,\n// \t\tpayload: message,\n// \t});\n// \tlocalStorage.removeItem(\"user\");\n// }\n// else {\n// \tdispatch({\n// \t\ttype: UPDATE_FAIL,\n// \t});\n// \tdispatch({\n// \t\ttype: SET_MESSAGE,\n// \t\tpayload: message,\n// \t});\n// \t// }\n// }\n// );\n};};","map":{"version":3,"sources":["C:/Users/834043/Desktop/study/Personal_Web_Site/client/src/Actions/auth.js"],"names":["REGISTER_SUCCESS","REGISTER_FAIL","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","SET_MESSAGE","UPDATE_SUCCESS","UPDATE_FAIL","DELETE_ACCOUNT","DELETE_ACCOUNT_SUCCESS","UNAUTHORIZED","NO_TOKEN_PROVIDED","v_session_expired","AuthService","register","user_data","imgFile","dispatch","then","response","type","payload","data","message","console","log","Promise","resolve","error","toString","reject","login","userID","password","profileImg","user","logout","userUpdate","loginValid","catch","alert"],"mappings":"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","sourcesContent":["import {\r\n\tREGISTER_SUCCESS,\r\n\tREGISTER_FAIL,\r\n\tLOGIN_SUCCESS,\r\n\tLOGIN_FAIL,\r\n\tLOGOUT,\r\n\tSET_MESSAGE,\r\n\tUPDATE_SUCCESS,\r\n\tUPDATE_FAIL,\r\n\tDELETE_ACCOUNT,\r\n\tDELETE_ACCOUNT_SUCCESS,\r\n\tUNAUTHORIZED,\r\n\tNO_TOKEN_PROVIDED\r\n} from \"./types\";\r\nimport {\r\n\tv_session_expired\r\n} from \"../Components/message\";\r\nimport AuthService from \"../Services/Auth.service\";\r\n\r\nexport const register = (user_data, imgFile) => (dispatch) => {\r\n\r\n\treturn AuthService.register(user_data, imgFile)\r\n\t\t.then(\r\n\t\t\t(response) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: REGISTER_SUCCESS,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: SET_MESSAGE,\r\n\t\t\t\t\tpayload: response.data.message,\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log('actions: ', response.data.message)\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t},\r\n\t\t\t(error) => {\r\n\t\t\t\tconst message =\r\n\t\t\t\t\t(error.response &&\r\n\t\t\t\t\t\terror.response.data &&\r\n\t\t\t\t\t\terror.response.data.message) ||\r\n\t\t\t\t\terror.message ||\r\n\t\t\t\t\terror.toString();\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: REGISTER_FAIL,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: SET_MESSAGE,\r\n\t\t\t\t\tpayload: message,\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn Promise.reject();\r\n\t\t\t}\r\n\t\t);\r\n};\r\n\r\nexport const login = (userID, password) => (dispatch) => {\r\n\r\n\treturn AuthService.login(userID, password)\r\n\t\t.then(\r\n\t\t\t(data) => {\r\n\t\t\t\tconsole.log(data.profileImg)\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: LOGIN_SUCCESS,\r\n\t\t\t\t\tpayload: { user: data },\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: SET_MESSAGE,\r\n\t\t\t\t\tpayload: data.message,\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t},\r\n\t\t\t(error) => {\r\n\t\t\t\tconst message =\r\n\t\t\t\t\t(error.response &&\r\n\t\t\t\t\t\terror.response.data &&\r\n\t\t\t\t\t\terror.response.data.message) ||\r\n\t\t\t\t\terror.message ||\r\n\t\t\t\t\terror.toString();\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: LOGIN_FAIL,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: SET_MESSAGE,\r\n\t\t\t\t\tpayload: message,\r\n\t\t\t\t});\r\n\t\t\t\treturn Promise.reject();\r\n\t\t\t}\r\n\t\t);\r\n};\r\n\r\nexport const logout = () => (dispatch) => {\r\n\tAuthService.logout();\r\n\tdispatch({\r\n\t\ttype: LOGOUT,\r\n\t});\r\n};\r\n\r\nexport const userUpdate = (user_data, imgFile) => (dispatch) => {\r\n\treturn AuthService.userUpdate(user_data, imgFile)\r\n\t\t.then(\r\n\t\t\tasync (data) => {\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: UPDATE_SUCCESS,\r\n\t\t\t\t\tpayload: { user: data }\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: SET_MESSAGE,\r\n\t\t\t\t\tpayload: data.message,\r\n\t\t\t\t});\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t// }\r\n\t\t\t},\r\n\t\t\t(error) => {\r\n\t\t\t\tconst message =\r\n\t\t\t\t\t(error.response &&\r\n\t\t\t\t\t\terror.response.data &&\r\n\t\t\t\t\t\terror.response.data.message) ||\r\n\t\t\t\t\terror.message ||\r\n\t\t\t\t\terror.toString();\r\n\t\t\t\tconsole.log(message);\r\n\t\t\t\t// // if (message == UNAUTHORIZED || message == NO_TOKEN_PROVIDED) {\r\n\t\t\t\t// \tdispatch({\r\n\t\t\t\t// \t\ttype: LOGIN_INVALID,\r\n\t\t\t\t// \t});\r\n\r\n\t\t\t\t// \tdispatch({\r\n\t\t\t\t// \t\ttype: SET_MESSAGE,\r\n\t\t\t\t// \t\tpayload: message,\r\n\t\t\t\t// \t});\r\n\t\t\t\t// \tlocalStorage.removeItem(\"user\");\r\n\t\t\t\t// }\r\n\t\t\t\t// else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: UPDATE_FAIL,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: SET_MESSAGE,\r\n\t\t\t\t\tpayload: message,\r\n\t\t\t\t});\r\n\t\t\t\t// }\r\n\t\t\t\treturn Promise.reject();\r\n\t\t\t}\r\n\t\t);\r\n};\r\n\r\nexport const loginValid = () => (dispatch) => {\r\n\treturn AuthService.loginValid()\r\n\t\t.then((data) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: SET_MESSAGE,\r\n\t\t\t\tpayload: data.message,\r\n\t\t\t});\r\n\t\t\treturn Promise.resolve();\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\talert(v_session_expired);\r\n\t\t\tdispatch(logout());\r\n\t\t\tconst message =\r\n\t\t\t\t(error.response &&\r\n\t\t\t\t\terror.response.data &&\r\n\t\t\t\t\terror.response.data.message) ||\r\n\t\t\t\terror.message ||\r\n\t\t\t\terror.toString();\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: LOGOUT\r\n\t\t\t});\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: SET_MESSAGE,\r\n\t\t\t\tpayload: message,\r\n\t\t\t});\r\n\t\t\treturn Promise.reject();\r\n\t\t})\r\n\t// .then(\r\n\t// \t(data) => {\r\n\t// \t\tdispatch({\r\n\t// \t\t\ttype: LOGIN_SUCCESS,\r\n\t// \t\t\tpayload: { user: data }\r\n\t// \t\t});\r\n\t// \t\tdispatch({\r\n\t// \t\t\ttype: SET_MESSAGE,\r\n\t// \t\t\tpayload: data.message,\r\n\t// \t\t});\r\n\t// \t\treturn Promise.resolve();\r\n\t// \t\t// }\r\n\t// \t},\r\n\t// \t(error) => {\r\n\t// \t\tconst message =\r\n\t// \t\t\t(error.response &&\r\n\t// \t\t\t\terror.response.data &&\r\n\t// \t\t\t\terror.response.data.message) ||\r\n\t// \t\t\terror.message ||\r\n\t// \t\t\terror.toString();\r\n\t// \t\tconsole.log(message);\r\n\t// // if (message == UNAUTHORIZED || message == NO_TOKEN_PROVIDED) {\r\n\t// \tdispatch({\r\n\t// \t\ttype: LOGIN_INVALID,\r\n\t// \t});\r\n\r\n\t// \tdispatch({\r\n\t// \t\ttype: SET_MESSAGE,\r\n\t// \t\tpayload: message,\r\n\t// \t});\r\n\t// \tlocalStorage.removeItem(\"user\");\r\n\t// }\r\n\t// else {\r\n\t// \tdispatch({\r\n\t// \t\ttype: UPDATE_FAIL,\r\n\t// \t});\r\n\r\n\t// \tdispatch({\r\n\t// \t\ttype: SET_MESSAGE,\r\n\t// \t\tpayload: message,\r\n\t// \t});\r\n\t// \t// }\r\n\r\n\t// }\r\n\t// );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}